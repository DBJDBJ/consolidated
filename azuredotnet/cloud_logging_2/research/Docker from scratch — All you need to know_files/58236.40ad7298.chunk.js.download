(self.webpackChunklite=self.webpackChunklite||[]).push([[58236],{25538:(e,n,t)=>{"use strict";t.d(n,{Z:()=>r});var i=t(67294);function a(){return(a=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e}).apply(this,arguments)}var o=i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.11 12.23l-5.2-5.76L9.48 6l-.42.47-5.16 5.7.85.77L9.48 7.7 14.26 13l.85-.77z",fill:"#292929"});const r=function(e){return i.createElement("svg",a({width:19,height:19,viewBox:"0 0 19 19",fill:"none"},e),o)}},60918:(e,n,t)=>{"use strict";t.d(n,{i:()=>c});var i=t(319),a=t.n(i),o=t(68216),r=t(32934),l={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PostJsonLd_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"seoTitle"}},{kind:"Field",name:{kind:"Name",value:"mediumUrl"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"username"}},{kind:"FragmentSpread",name:{kind:"Name",value:"userUrl_user"}}]}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"domain"}},{kind:"Field",name:{kind:"Name",value:"slug"}},{kind:"Field",name:{kind:"Name",value:"logo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"originalWidth"}},{kind:"Field",name:{kind:"Name",value:"originalHeight"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"previewImage"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"focusPercentX"}},{kind:"Field",name:{kind:"Name",value:"focusPercentY"}},{kind:"Field",name:{kind:"Name",value:"originalWidth"}},{kind:"Field",name:{kind:"Name",value:"originalHeight"}}]}},{kind:"Field",name:{kind:"Name",value:"isLocked"}},{kind:"Field",name:{kind:"Name",value:"firstPublishedAt"}},{kind:"Field",name:{kind:"Name",value:"updatedAt"}},{kind:"Field",name:{kind:"Name",value:"isShortform"}},{kind:"Field",name:{kind:"Name",value:"shortformType"}},{kind:"Field",name:{kind:"Name",value:"structuredData"}},{kind:"FragmentSpread",name:{kind:"Name",value:"getTitleForPost_post"}}]}}].concat(a()(o.$m.definitions),a()(r.bq.definitions))},d={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"postMetaDescription_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"seoDescription"}},{kind:"Field",name:{kind:"Name",value:"metaDescription"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"previewContent"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"subtitle"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"getPostContentAsString_post"}}]}}].concat(a()(r.bh.definitions))},s={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"shortformPostMetaDescription_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"metaDescription"}},{kind:"Field",name:{kind:"Name",value:"seoDescription"}},{kind:"Field",name:{kind:"Name",value:"shortformType"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"FragmentSpread",name:{kind:"Name",value:"getPostContentAsString_post"}}]}}].concat(a()(r.bh.definitions))},c={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PostMetadata_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"socialTitle"}},{kind:"Field",name:{kind:"Name",value:"socialDek"}},{kind:"Field",name:{kind:"Name",value:"noIndex"}},{kind:"Field",name:{kind:"Name",value:"curationStatus"}},{kind:"Field",name:{kind:"Name",value:"canonicalUrl"}},{kind:"Field",name:{kind:"Name",value:"mediumUrl"}},{kind:"Field",name:{kind:"Name",value:"metaDescription"}},{kind:"Field",name:{kind:"Name",value:"latestPublishedAt"}},{kind:"Field",name:{kind:"Name",value:"visibility"}},{kind:"Field",name:{kind:"Name",value:"isLimitedState"}},{kind:"Field",name:{kind:"Name",value:"readingTime"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"twitterScreenName"}},{kind:"FragmentSpread",name:{kind:"Name",value:"userUrl_user"}}]}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"twitterUsername"}},{kind:"Field",name:{kind:"Name",value:"facebookPageId"}}]}},{kind:"Field",name:{kind:"Name",value:"previewContent"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"subtitle"}}]}},{kind:"Field",name:{kind:"Name",value:"previewImage"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"focusPercentX"}},{kind:"Field",name:{kind:"Name",value:"focusPercentY"}},{kind:"Field",name:{kind:"Name",value:"originalHeight"}},{kind:"Field",name:{kind:"Name",value:"originalWidth"}}]}},{kind:"Field",name:{kind:"Name",value:"isShortform"}},{kind:"Field",name:{kind:"Name",value:"noIndex"}},{kind:"Field",name:{kind:"Name",value:"curationStatus"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostJsonLd_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"postMetaDescription_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"shortformPostMetaDescription_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"shouldIndexPost_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"shortformPostTitle_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"getTitleDetails_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"getTitleForPost_post"}}]}}].concat(a()(o.$m.definitions),a()(l.definitions),a()(d.definitions),a()(s.definitions),a()(r.HF.definitions),a()(r.Pz.definitions),a()(r.dm.definitions),a()(r.bq.definitions))}},8459:(e,n,t)=>{"use strict";t.d(n,{T:()=>c});var i=t(63038),a=t.n(i),o=t(67294),r=t(77355),l=t(96370),d=t(29746),s=t(34135),c=function(e){var n=e.isDockingEnabled,t=void 0!==n&&n,i=e.undockedBackgroundColor,c=e.maxWidthSize,m=void 0===c?"inset":c,u=e.children,p=o.useRef(null),v=o.useRef(null),k=o.useState(!1),g=a()(k,2),f=g[0],S=g[1];o.useEffect((function(){var e=function(){var e,n,t=null===(e=p.current)||void 0===e?void 0:e.getBoundingClientRect().y,i=null===(n=v.current)||void 0===n?void 0:n.getBoundingClientRect().y;t&&i&&S(Boolean(i-t))};if(e(),t)return s.V6.on("scroll",e),function(){s.V6.off("scroll",e)}}),[t]);var h=t&&f;return o.createElement(o.Fragment,null,o.createElement(r.x,{ref:v}),o.createElement(r.x,{tag:"footer",ref:p,display:"flex",alignItems:"center",boxSizing:"content-box",height:(0,d.a)(52),maxHeight:(0,d.a)(52),position:t?{xs:"static",sm:"static",md:"sticky",lg:"sticky",xl:"sticky"}:"static",bottom:t?{xs:void 0,sm:void 0,md:"0",lg:"0",xl:"0"}:void 0,backgroundColor:h?"BACKGROUND":i,borderTop:h?{xs:"NONE",sm:"NONE",md:"BASE_LIGHTER",lg:"BASE_LIGHTER",xl:"BASE_LIGHTER"}:"NONE"},o.createElement(r.x,{flexGrow:"1"},o.createElement(l.P,{size:m},u))))}},10774:(e,n,t)=>{"use strict";t.d(n,{w:()=>r});var i=t(319),a=t.n(i),o=t(14603),r={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PostRightColumn_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"firstPublishedAt"}},{kind:"Field",name:{kind:"Name",value:"visibility"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"AuthorInfo_user"}}]}}]}}].concat(a()(o.x.definitions))}},34287:(e,n,t)=>{"use strict";t.d(n,{i:()=>i,P:()=>a});var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"buildBranchViewData_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"layerCake"}},{kind:"Field",name:{kind:"Name",value:"primaryTopic"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"slug"}},{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[{kind:"Argument",name:{kind:"Name",value:"postMeteringOptions"},value:{kind:"Variable",name:{kind:"Name",value:"postMeteringOptions"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isLockedPreviewOnly"}}]}}]}}]},a={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"buildBranchViewData_meteringInfo"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MeteringInfo"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"postIds"}}]}}]}},34492:(e,n,t)=>{"use strict";t.d(n,{I:()=>p});var i,a=t(59713),o=t.n(a),r=t(67294);!function(e){e.S="S",e.L="L"}(i||(i={}));var l=t(77355),d=t(9935),s=t(87691),c=t(14646),m=t(97489),u=t(14804),p=function(e){var n=e.children,t=e.scale,a=void 0===t?i.L:t,p=e.alpha,v=void 0===p?.05:p,k=e.verticalMargins,g=void 0===k?{normal:"24px",small:"24px"}:k,f=e.horizontalMargins,S=void 0===f?{normal:"-16px",small:"-12px 0"}:f,h=e.dismissable,y=e.onClick,x=e.maxWidth,N=void 0===x?"740px":x,b=(0,c.I)();return r.createElement("div",{className:b((function(e){return o()({background:(0,u.Uy)(v),borderRadius:"4px",margin:"".concat(g.small," ").concat(S.small),position:"relative"},m.xl(e),{margin:"".concat(g.normal," ").concat(S.normal)})}))},r.createElement(l.x,{display:"flex",justifyContent:"space-between",maxWidth:N,padding:"16px",sm:{padding:"12px"}},r.createElement(s.F,{scale:a,color:"DARKER"},n),h&&y&&r.createElement(d.P,{onClick:y,size:"REGULAR",isPositionAbsolute:!1,compensateInnerPadding:!0,"data-testid":"close-button"})))}},20512:(e,n,t)=>{"use strict";t.d(n,{Y4:()=>l,NJ:()=>d,lc:()=>s});var i=t(59713),a=t.n(i),o=t(46696);function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function l(e){var n=e.miroId,t=e.originalWidth,i=e.originalHeight,a=e.focusPercentX,r=e.focusPercentY,l=e.croppedWidth;if(!n)return null;var d=(0,o.vz)({miroId:n,aspectRatio:16/9,croppedWidth:l,originalWidth:t,originalHeight:i,focusPercentX:a,focusPercentY:r}),s=(0,o.vz)({miroId:n,aspectRatio:4/3,croppedWidth:l,originalWidth:t,originalHeight:i,focusPercentX:a,focusPercentY:r}),c=(0,o.vz)({miroId:n,aspectRatio:1,croppedWidth:l,originalWidth:t,originalHeight:i,focusPercentX:a,focusPercentY:r}),m=new Set([d,s,c]);return Array.from(m)}function d(e){return function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){a()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({"@type":"ImageObject"},e)}function s(e){var n=e.id,t=e.originalWidth,i=e.originalHeight;if(!n||!t||!i)return null;var a=Math.min(i,60),r=a/i,l=Math.floor(t*r);return d({width:l,height:a,url:(0,o.W6)({miroId:n,width:l,freezeGifs:!0,strategy:o._S.Resample})})}},96396:(e,n,t)=>{"use strict";t.d(n,{d:()=>s,W:()=>d});var i=t(319),a=t.n(i),o=t(78620),r={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"LIHighlightMeter_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"UpsellClickable_post"}}]}}].concat(a()(o.H.definitions))},l=t(20121),d={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"MeterController_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"isLocked"}},{kind:"Field",name:{kind:"Name",value:"lockedSource"}},{kind:"FragmentSpread",name:{kind:"Name",value:"LIHighlightMeter_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"LOHighlightMeter_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"SusiContainer_post"}}]}}].concat(a()(r.definitions),a()([{kind:"FragmentDefinition",name:{kind:"Name",value:"LOHighlightMeter_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}}]),a()(l.qt.definitions))},s={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"MeterController_meteringInfo"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MeteringInfo"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"postIds"}},{kind:"Field",name:{kind:"Name",value:"maxUnlockCount"}}]}}]}},58098:(e,n,t)=>{"use strict";t.d(n,{rh:()=>z});var i=t(28655),a=t.n(i),o=t(50008),r=t.n(o),l=t(63038),d=t.n(l),s=t(71439),c=t(67294),m=t(12291),u=t(23450),p=t.n(u),v=t(34492),k=t(77355),g=function(e){var n=e.link,t=e.text,i=e.verticalMargins;return c.createElement(v.I,{verticalMargins:i},t," ",c.createElement(k.x,{display:"inline",whiteSpace:"nowrap"},n))},f=t(36405),S=t(6443),h=t(28451),y=t(43822),x=t(18627),N=t(66411),b=t(90924),E=t(43487),F=t(50458);function P(){var e=a()(["\n  fragment LIHighlightMeter_post on Post {\n    id\n    ...UpsellClickable_post\n  }\n  ","\n"]);return P=function(){return e},e}var w=function(e){var n=e.meterCount,t=e.meterLimit,i=e.post,a=(0,S.H)().value,o=(0,x.Av)(),r=null==a?void 0:a.isMembershipTrialEligible,l=!(!(0,f.P5)("enable_trial_upsell")||!r);c.useEffect((function(){o.event("meter.viewed",{uiType:h.j.LIHighlightCTA,postId:i.id,meterCount:n,userId:null==a?void 0:a.id}),r&&o.event("experiment.eligible",{experimentId:"6797776ba4cf"})}),[]);var d,s=(0,E.v9)((function(e){return e.config.authDomain})),m=c.createElement(b.M,{tag:"span"},c.createElement(y.a,{linkStyle:"OBVIOUS",post:i,inline:!0,redirectUrl:(0,F.c5p)(s)},l?"Start your free trial":"Upgrade for unlimited access."));return c.createElement(N.cW,{source:{dimension:"post_counter",name:"upgrade_membership",postId:i.id}},c.createElement(g,{text:(d=t-n,d<=0?c.createElement(c.Fragment,null,"This is your ",c.createElement("b",null,"last")," free member-only story this month."):c.createElement(c.Fragment,null,"You have ",c.createElement("b",null,d)," free member-only ",p()("story",d)," left this month.")),link:m}))},I=(0,s.Ps)(P(),y.H),_=t(26350);function C(){var e=a()(["\n  fragment LOHighlightMeter_post on Post {\n    id\n  }\n"]);return C=function(){return e},e}var O=function(e){switch(e){case 1:return c.createElement(c.Fragment,null,"You have ",c.createElement("b",null,"2")," free member-only stories left this month.");case 2:return c.createElement(c.Fragment,null,"You have ",c.createElement("b",null,"1")," free member-only story left this month.");case 3:return c.createElement(c.Fragment,null,"This is your ",c.createElement("b",null,"last")," free member-only story this month.");default:return c.createElement(c.Fragment,null,"You've read all your free member-only stories this month.")}},D=function(e){var n=e.meterCount,t=e.post,i=(0,E.v9)((function(e){return e.config.productName})),a=function(e){switch(e){case 3:return"metered_view_3";case 2:return"metered_view_2";case 1:default:return"smart_meter"}}(n),o=(0,x.Av)();c.useEffect((function(){o.event("meter.viewed",{uiType:h.j.LOHighlightCTA,postId:t.id,meterCount:n})}),[]);var r=c.createElement(_.R9,{linkStyle:"OBVIOUS",inline:!0,operation:"register",susiEntry:a},"Sign up for ".concat(i," and get an extra one"));return c.createElement(N.cW,{source:{postId:t.id}},c.createElement(g,{text:O(n),link:r,verticalMargins:{normal:"24px",small:"16px"}}))},A=(0,s.Ps)(C()),T=t(52602),M=t(59626),R=t(14646),L=t(80872),B=t(54712),j=t(98067);function U(){var e=a()(["\n  fragment MeterController_meteringInfo on MeteringInfo {\n    postIds\n    maxUnlockCount\n  }\n"]);return U=function(){return e},e}function V(){var e=a()(["\n  fragment MeterController_post on Post {\n    creator {\n      id\n    }\n    isLocked\n    lockedSource\n    ...LIHighlightMeter_post\n    ...LOHighlightMeter_post\n    ...SusiContainer_post\n  }\n  ","\n  ","\n  ","\n"]);return V=function(){return e},e}var W=function(e){var n=e.meteringInfo,t=e.post,i=e.viewer,a=c.useState(!1),o=d()(a,2),r=o[0],l=o[1],s=n.maxUnlockCount||3,m=n.postIds.length;return m<=s?(0,L.sy)()&&(0,T.Dk)(i)?((0,L.Of)(),null):(r||l(!0),c.createElement(w,{meterCount:m,post:t,meterLimit:s})):null},H=function(e){var n=e.meterCount,t=e.post,i=c.useState(!1),a=d()(i,2),o=a[0],r=a[1];switch(n){case 1:case 2:case 3:return o||r(!0),c.createElement(D,{meterCount:n,post:t});default:return null}},z=function(e){var n=e.meteringInfo,t=e.post,i=(0,m.I0)(),a=(0,R.I)(),o=(0,B.xg)(),l=c.useState(!1),s=d()(l,2),u=s[0],p=s[1];c.useEffect((function(){void 0!==("undefined"==typeof document?"undefined":r()(document))&&p(!0),i((0,j.Dl)(!1))}),[]);var v=(0,S.H)(),k=v.loading,g=v.error,f=v.value;if(k||g)return c.createElement(c.Fragment,null);var h=f&&f.mediumMemberAt||void 0,y=t&&t.creator&&t.creator.id||void 0,x=f&&f.id||void 0,N=f?h||y===x:"LOCKED_POST_SOURCE_SYNDICATED"===t.lockedSource,b=!u||!t.isLocked||!n.postIds.includes(t.id)||N,E=u&&!b,F={height:E?"100%":"0px",overflow:E?"inherit":"hidden",transition:"height 2s cubic-bezier(0.23, 1, 0.32, 1) 0s"},P=f?c.createElement(W,{meteringInfo:n,post:t,viewer:f}):c.createElement(H,{meterCount:n.postIds.length,post:t});return c.createElement("div",{className:o?a(F):void 0},!b&&P)};(0,s.Ps)(V(),I,A,M.qt),(0,s.Ps)(U())},36370:(e,n,t)=>{"use strict";t.d(n,{cu:()=>Ce,Y6:()=>_e,rU:()=>Ie});var i=t(28655),a=t.n(i),o=t(71439),r=t(67294),l=t(63007),d=t(72619);function s(){var e=a()(["\n  fragment MemberOnlyWall_post on Post {\n    id\n    creator {\n      id\n      name\n      username\n      ...useShouldShowEntityDrivenSubscription_creator\n      ...EntityDrivenSubscriptionLandingPageScreen_writer\n    }\n  }\n  ","\n  ","\n"]);return s=function(){return e},e}var c=(0,o.Ps)(s(),l.G,d._k),m=t(63038),u=t.n(m),p=t(12291),v=t(46829),k={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"CreatorsDropdownQuery"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userViewedPartnerProgramCreators"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"imageId"}}]}}]}}]},g=t(84531),f=t(77355);function S(e){var n=e.alt,t=e.diameter1,i=e.diameter2,a=e.diameter3,o=e.miroId1,l=e.miroId2,d=e.miroId3,s=e.freezeGifs;return r.createElement(r.Fragment,null,r.createElement(g.z,{alt:n,miroId:o,diameter:t,freezeGifs:s}),r.createElement(f.x,{paddingLeft:"2px",paddingTop:"2px",display:"flex",flexDirection:"column"},r.createElement(g.z,{alt:n,miroId:l,diameter:i,freezeGifs:s}),r.createElement(f.x,{paddingTop:"2px"},r.createElement(g.z,{alt:n,miroId:d,diameter:a,freezeGifs:s}))))}var h=t(38352),y=t(81281),x=t(66227),N=t(73917),b=t(47230),E=t(87691),F=t(18627),P=t(66411),w=t(14646),I=t(31889),_=t(99015),C=t(25538),O=t(87498),D="PAY_MULTIPLE_WRITERS_OPTION_ID",A=function(e){return{outline:"none",cursor:"pointer",background:e.accentColor.fill.normal,":hover":{background:e.accentColor.fill.dark}}},T=function(e){return{outline:"none",cursor:"pointer",":hover":{background:e.baseColor.background.light}}},M=[],R=function(e){var n,t,i=e.post,a=e.onSelect,o=(0,w.I)(),l=(0,I.F)(),d=(0,v.useQuery)(k,{ssr:!1}),s=d.error,c=d.data,m=d.loading,p=(0,F.Av)(),R=r.useState(null===(n=i.creator)||void 0===n?void 0:n.id),L=u()(R,2),B=L[0],j=L[1];if(!i.creator||s)return null;M=(null==c?void 0:c.userViewedPartnerProgramCreators.filter((function(e){var n;return(null==e?void 0:e.id)!==(null===(n=i.creator)||void 0===n?void 0:n.id)})).filter((function(e){return Boolean(e)})))||[],i.creator&&M.unshift({id:i.creator.id,name:i.creator.name,imageId:i.creator.imageId}),M.splice(5,0,{id:D,name:"quality writing",imageId:null});var U=null!==(t=i.creator.imageId)&&void 0!==t?t:O.gG,V=function(e){return B===e?"WHITE":"DARKER"},W=r.createElement(f.x,{width:"330px"},r.createElement(h.mX,{padding:"0"},r.createElement(f.x,null,M.slice(0,6).filter((function(e){return null!=e})).map((function(e,n){var t,l,d,s;return r.createElement(P.cW,{key:"creator-".concat(e.id),source:{index:n},extendSource:!0},r.createElement("div",{className:o((s=e.id,B===s?A:T)),onClick:function(){return function(e){var n,t;a(e),j(e.id),e.id===D?p.event("paywallDropdown.allCreatorsOptionSelected",{defaultCreatorId:null==i||null===(n=i.creator)||void 0===n?void 0:n.id}):p.event("paywallDropdown.creatorSelected",{defaultCreatorId:null==i||null===(t=i.creator)||void 0===t?void 0:t.id,selectedCreatorId:e.id})}(e)},"aria-hidden":"true","data-testid":"creator-item"},r.createElement(h.Sl,null,e.id!==D?r.createElement(f.x,{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center"},r.createElement(g.z,{miroId:e.imageId||"",alt:e.name||"",diameter:32,freezeGifs:!1}),r.createElement(f.x,{paddingLeft:"21px"},r.createElement(E.F,{scale:"L",color:V(e.id)},e.name))):r.createElement(f.x,{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center"},r.createElement(S,{miroId1:(null===(t=M[0])||void 0===t?void 0:t.imageId)||U,miroId2:(null===(l=M[1])||void 0===l?void 0:l.imageId)||U,miroId3:(null===(d=M[2])||void 0===d?void 0:d.imageId)||U,alt:"Pay multiple writers",diameter1:21,diameter2:12,diameter3:9,freezeGifs:!1}),r.createElement(f.x,{display:"inline-block",paddingLeft:"21px"},r.createElement(E.F,{tag:"span",scale:"L",color:V(e.id)},"Don't want to pick one writer?"),r.createElement(E.F,{tag:"span",scale:"S",color:V(e.id)},"Split your membership fee among writers you read"))))))}))),r.createElement(f.x,{padding:"8px 20px 0px 20px",ariaHidden:"true"},r.createElement(y.V,null)),r.createElement(f.x,{padding:"10px 20px 18px 20px"},r.createElement(E.F,{scale:"S",color:"LIGHTER"},"These are writers you read most, who are eligible to receive a portion of your membership fee via Medium’s Partner Program."))));return r.createElement(x.B,null,(function(e){var n=e.isVisible,t=e.toggle,a=e.hide;return r.createElement("div",{onClick:function(){var e;t(),n||p.event("paywallDropdown.clicked",{defaultCreatorId:null==i||null===(e=i.creator)||void 0===e?void 0:e.id})},"data-testid":"popover-button","aria-hidden":"true"},r.createElement(N.J,{isVisible:n,hide:a,flip:!0,popoverRenderFn:function(){return W},display:"flex",targetDistance:10},r.createElement(b.z,{width:"240px",buttonStyle:"SUBTLE",size:"REGULAR",loading:m},r.createElement(f.x,{display:"flex",justifyContent:"center"},r.createElement(E.F,{scale:"M",color:"DARKER"},"Support a different writer"),r.createElement(f.x,{paddingLeft:"4px"},n?r.createElement(C.Z,{fill:l.baseColor.text.lighter}):r.createElement(_.Z,{fill:l.baseColor.text.lighter}))))))}))},L=t(14804),B=/rgba\(([\d]+),\s*([\d]+),\s*([\d]+),\s*([\d]+|[\d]*.[\d]+)\)/,j=function(e){var n,t,i=e.children,a=(0,I.F)();return r.createElement(r.Fragment,null,r.createElement(f.x,{marginTop:"-240px",background:"linear-gradient(".concat((n=a.backgroundColor,t=n.match(B),t?"rgba(".concat(t[1],", ").concat(t[2],", ").concat(t[3],", 0)"):(0,L.l9)(0)),", ").concat(a.backgroundColor,")"),height:"250px",position:"relative",width:"100%"}),r.createElement(f.x,{backgroundColor:"BACKGROUND"},r.createElement(f.x,{margin:"auto",maxWidth:"760px",sm:{margin:"0 24px 0"}},i)))},U=t(25735),V=t(6443),W=t(25550),H=t(867),z=t(58670),G=t(84157),Y=t(54558),q=t(43822),K=t(8126),$=t(90924),Q=t(97171),X=t(78285),J=t(43487),Z=t(17583),ee=t(78870),ne=t(50458);function te(){var e=a()(["\n  fragment PayWall_post on Post {\n    id\n    creator {\n      id\n      name\n      imageId\n      referredMembershipCustomHeadline\n      referredMembershipCustomBody\n    }\n  }\n"]);return te=function(){return e},e}var ie=function(e){var n,t=e.post,i=e.showTrialPaywall,a=e.authDomain,o=e.enablePaywallConversionsForReferredMembers,l=e.enableCreatorsDropdown,d=e.selectedCreatorId,s=(0,V.H)().value,c=t.creator&&t.creator.id,m=(0,ne.c5p)(a),u=(0,F.Av)();n=l?(0,ee.Rk)((0,ne.c5p)(a),{subscribeToUserId:d||"",susiEntry:"post_paywall"}):(0,ee.Rk)((0,ne.c5p)(a),{subscribeToUserId:c||"",susiEntry:"post_paywall"});var p=o?n:m,v=r.useCallback((function(){u.event("paywall.upgradeClicked",{postId:null==t?void 0:t.id,userId:null==s?void 0:s.id})}),[t,null==s?void 0:s.id]);return r.createElement(P.cW,{source:{dimension:"post_limit",name:"upgrade_membership",postId:t.id}},r.createElement($.M,null,r.createElement(f.x,{display:"inline-block",textAlign:"center"},r.createElement(q.a,{isButton:!0,onClick:v,buttonStyle:i?"BRAND":"STRONG",width:l?"240px":i||s&&s.hasPastMemberships?"182px":"104px",redirectUrl:p},i?"Start your free trial":s&&s.hasPastMemberships?"Resume membership":"Upgrade"))))},ae=function(e){var n=e.declineSuggestedAccount,t=e.userSocialLogins,i=(0,p.I0)();return r.createElement(P.cW,{source:{susiEntry:"post_paywall"},extendSource:!0},r.createElement(f.x,{display:"flex",sm:{flexDirection:"column"}},r.createElement(f.x,{display:"flex",flexDirection:"row",justifyContent:"center"},t.facebook||t.google||t.twitter?r.createElement(z.r,{userSocialLogins:t}):r.createElement(H.o,{onSuccess:function(){return i((0,X.Pc)({step:"CHECK_YOUR_INBOX",operation:"login",susiEntry:"post_paywall"}))},userId:t.userId},(function(e){var n=e.handleSubmit;return r.createElement(b.z,{buttonStyle:"SOCIAL",size:"REGULAR",onClick:n},"Send login link")})))),n&&r.createElement(f.x,{marginTop:"10px",marginRight:"5px",sm:{marginTop:"20px"},display:"flex",justifyContent:"center",flexDirection:"column"},r.createElement(E.F,{scale:"M"},r.createElement(G.G,{declineSuggestedAccount:n,isSocial:!!t&&!!(t.facebook||t.google||t.twitter)}))))},oe=function(e){var n=e.declineSuggestedAccount,t=e.userSocialLogins,i=e.suggestedAccountEventData,a=e.showSuggestedAccount,o=e.postId;return r.createElement(P.cW,{source:{dimension:"post_limit_suggestion",name:"upgrade_membership",postId:o}},r.createElement($.M,{eventData:i},r.createElement(f.x,{display:"inline-block",textAlign:"center"},r.createElement(ae,{declineSuggestedAccount:n,showSuggestedAccount:a,userSocialLogins:t}),r.createElement(f.x,{display:"flex",flexDirection:"row",marginTop:"10px",sm:{justifyContent:"center"}},r.createElement(E.F,{scale:"L"},r.createElement(q.a,{eventData:i,linkStyle:"OBVIOUS"},"Learn more about membership"))))))},re=function(e){var n=e.post,t=e.excludePadding,i=void 0!==t&&t,a=(0,J.v9)((function(e){return e.config.authDomain})),o=(0,J.v9)((function(e){return e.config.productName})),l=r.useState(n.creator),d=u()(l,2),s=d[0],c=d[1],m=(0,V.H)().value,p=(0,W.r)().viewerId,v=(0,F.Av)(),k=null==m?void 0:m.isMembershipTrialEligible,S=!(!(0,U.VB)({name:"enable_trial_upsell",placeholder:!1})||!k),h=(0,Z.s)(),y="xs"===h||"sm"===h,x=!!(0,U.VB)({name:"optimizely_holdback",placeholder:!1}),N="Your membership fee directly supports ".concat(n.creator&&n.creator.name," and other writers you read. You'll also get full access to every story on ").concat(o,"."),b=n.creator&&n.creator.referredMembershipCustomBody,P=!!(0,U.VB)({name:"enable_referred_membership_entity_led_paywall",placeholder:!1}),w=!!(0,U.VB)({name:"enable_paywall_conversions_for_referred_members",placeholder:!1}),I=!!(0,U.VB)({name:"enable_paywall_with_dropdown",placeholder:!1}),_=!!(0,U.VB)({name:"enable_referred_memberships_custom_messaging",placeholder:!1}),C=!!(0,U.VB)({name:"enable_referred_memberships_custom_messaging_on_paywall",placeholder:!1}),D=_&&C;r.useEffect((function(){k&&v.event("experiment.eligible",{experimentId:"6797776ba4cf"})}),[k]),r.useEffect((function(){v.event("paywall.viewed",{userId:null==m?void 0:m.id})}),[]);var A=function(){var e,t,i;if(null===(e=i=I?s:n.creator)||void 0===e||!e.imageId)return null;var a=null!==(t=i.imageId)&&void 0!==t?t:O.gG;return r.createElement(f.x,{display:"flex",paddingBottom:"16px",justifyContent:"center"},r.createElement(g.z,{miroId:a,alt:i.name||"",diameter:80,freezeGifs:!1}))};return r.createElement(j,null,r.createElement(Y.o,{postRenderCallback:function(){}},(function(e){var t,l=e.loading,d=e.showSuggestedAccount,u=e.declineSuggestedAccount,v=e.userSocialLogins;return l?r.createElement(r.Fragment,null):(d&&(t={alternateUserSuggestionShown:d,alternateUserSuggestionAccountType:(0,Q.S)(v),alternateUserSuggestionTargetUserId:!!v&&v.userId,alternateUserSuggestionSourceUserId:p}),r.createElement(r.Fragment,null,r.createElement(f.x,{display:"flex",justifyContent:"center",textAlign:"center",sm:{flexDirection:"column"}},r.createElement(f.x,{display:"flex",flexDirection:"column",padding:i?"48px 0 0":"48px 50px",sm:{padding:P?"0":"28px 16px 32px",textAlign:"center"}},(P||I||D)&&r.createElement(A,null),r.createElement(K.F1,{scale:{xs:"S",sm:"S",md:"M",lg:"M",xl:"M"}},function(e,n,t,i,a,o,l){var d=a.showSuggestedAccount,s=a.showTrialPaywall,c=a.inHoldback,m=a.showEntityLedPaywall,u=a.enableCreatorsDropdown,p=a.enableCustomMessaging,v=n?(0,Q.J)(n):null;v=v&&v.length<=13?v:null;var k="Read every story from ".concat(t," (and thousands of other writers on ").concat(e,").");return d?"Switch to your member account for unlimited reading.":s?r.createElement(f.x,{textAlign:"center",sm:{marginBottom:"5px",textAlign:"center"}},v?"".concat(v,", keep reading."):"Keep reading."):m&&!u?r.createElement(f.x,{maxWidth:"680px",margin:"auto",textAlign:"center"},r.createElement(f.x,{sm:{marginBottom:"8px"}},v?"".concat(v,", read more from ").concat(t," — and everyone else on ").concat(e,"."):"This is a member-only story published by ".concat(t,"."))):u&&o?r.createElement(f.x,{maxWidth:"680px",margin:"auto",textAlign:"center",sm:{width:"327px"}},r.createElement(K.F1,{scale:l?"S":"M",clamp:2},"Keep reading and support ",o.name)):p?r.createElement(f.x,{maxWidth:"680px",margin:"auto",textAlign:"center"},r.createElement(f.x,{sm:{marginBottom:"8px"}},i||k)):r.createElement(f.x,{textAlign:"left",sm:{marginBottom:"5px",textAlign:"center"}},c?"How to read this story — and everything else on ".concat(e,"."):v?t?"".concat(v,", read more from ").concat(t," — and everyone else on ").concat(e,"."):"".concat(v,", here's how to read this story — and everything else on ").concat(e,"."):t?"How to read this story from ".concat(t," — and everything else on ").concat(e,"."):"How to read this story — and everything else on ".concat(e,"."))}(o,m&&m.name,n.creator&&n.creator.name,n.creator&&n.creator.referredMembershipCustomHeadline,{showSuggestedAccount:d,showTrialPaywall:S,inHoldback:x,showEntityLedPaywall:P,enableCreatorsDropdown:I,enableCustomMessaging:D},s,y)),r.createElement(E.F,{scale:{xs:"M",sm:"M",md:"L",lg:"L",xl:"L"},color:"DARKER",tag:"div"},!d&&!S&&r.createElement(r.Fragment,null,P&&!I?r.createElement(f.x,{maxWidth:"680px",margin:"auto",textAlign:"center"},r.createElement(f.x,{marginTop:"8px",marginBottom:"16px"},"Reward great thinking. When you become a member, you get unlimited access to Medium and 50% of your membership fee goes to"," ",n.creator&&n.creator.name,".*")):I?r.createElement(f.x,{maxWidth:"680px",margin:"auto",textAlign:"center",sm:{width:"327px"}},r.createElement(f.x,{marginTop:"10px",marginBottom:"10px"},"When you become a member, you will get unlimited access to Medium and 50% of your membership fee will go to ",null==s?void 0:s.name,".*")):D?r.createElement(f.x,{marginTop:"8px",marginBottom:"28px",textAlign:"center",sm:{width:"327px"}},r.createElement(f.x,{marginTop:"10px",marginBottom:"10px"},b||N)):r.createElement(f.x,{marginTop:"8px",marginBottom:"28px",textAlign:"left",sm:{display:"inline-block",textAlign:"center"}},"You’ve read all your free member-only stories, become a member to get unlimited access. Your membership fee supports the voices you want to hear more from."),r.createElement(f.x,{display:"flex",justifyContent:I||P||D?"center":void 0},I&&r.createElement(f.x,{display:"flex",alignItems:"center",xs:{flexDirection:"column"},sm:{flexDirection:"column"}},!y&&r.createElement(f.x,{display:"flex"},r.createElement(R,{post:n,onSelect:c}),r.createElement(f.x,{paddingLeft:"8px"},r.createElement(ie,{post:n,showTrialPaywall:S,authDomain:a,enablePaywallConversionsForReferredMembers:w,enableCreatorsDropdown:!0,selectedCreatorId:null==s?void 0:s.id}))),y&&r.createElement(f.x,null,r.createElement(ie,{post:n,showTrialPaywall:S,authDomain:a,enablePaywallConversionsForReferredMembers:w,enableCreatorsDropdown:!0,selectedCreatorId:null==s?void 0:s.id}),r.createElement(f.x,{paddingTop:"8px"},r.createElement(R,{post:n,onSelect:c})))),!I&&r.createElement(ie,{post:n,showTrialPaywall:S,authDomain:a,enablePaywallConversionsForReferredMembers:w})),(P||I)&&r.createElement(f.x,{paddingTop:"16px",margin:"auto",textAlign:"center"},r.createElement(E.F,{scale:"S",color:"LIGHTER"},"* Minus standard payment processing fees"))),r.createElement(f.x,{marginTop:d?"28px":"8px",marginBottom:"28px",paddingRight:"6px",paddingLeft:"6px",sm:{display:"inline-block"}},function(e,n,t,i){var a=t.showTrialPaywall;if(t.showSuggestedAccount&&n){var o=n.isMember,l=n.redactedEmailAddress;return r.createElement(r.Fragment,null,"Looks like you're coming from the ",o&&"member ","account"," ",r.createElement("b",null,l)," but you’re signed in as ",r.createElement("b",null,null==i?void 0:i.email),". Switch to your",o?" member account for unlimited access":" account",".")}return r.createElement(f.x,{textAlign:a?"center":"left"},a?"Start your 1 month free trial for unlimited access to everything on ".concat(e,". If it’s not for you, cancel anytime."):"")}(o,v,{showSuggestedAccount:d,showTrialPaywall:S},m))),!!d&&v&&r.createElement(oe,{declineSuggestedAccount:u,userSocialLogins:v,suggestedAccountEventData:t,showSuggestedAccount:d,postId:n.id}),S&&!d&&r.createElement(ie,{post:n,showTrialPaywall:S,authDomain:a,enablePaywallConversionsForReferredMembers:w})))))})))},le=(0,o.Ps)(te()),de=t(33916),se=t(36405),ce=t(26350),me=t(28451),ue=t(54935),pe=t(32442),ve=t(69862),ke=t(73950),ge=t(21755),fe=t(40980);function Se(){var e=a()(["\n  fragment RegWall_meteringInfo on MeteringInfo {\n    postIds\n  }\n"]);return Se=function(){return e},e}function he(){var e=a()(["\n  fragment RegWall_post on Post {\n    id\n    lockedSource\n    ...SusiClickable_post\n  }\n  ","\n"]);return he=function(){return e},e}var ye="post_regwall",xe=function(e){var n=e.enablePasswords,t=e.meterCount,i=e.postId,a={operation:"register"},o=(0,ue.j)().openModal;return r.createElement(f.x,{display:"flex",flexDirection:"column",textAlign:"center",sm:{flexDirection:"column"}},r.createElement(f.x,{margin:"".concat(n?"32px":"62px"," 0 10px"),sm:{margin:"40px 0 12px 0"}},r.createElement(fe.$,{eventData:{meterCount:t,operation:a.operation,postId:i}},r.createElement(ke.x,a))),r.createElement(f.x,{marginBottom:n?"32px":"52px",sm:{marginBottom:"40px"}},r.createElement(fe.$,{eventData:{meterCount:t,operation:a.operation,postId:i}},n?r.createElement(pe.R,{goToEmailAuthStep:function(){o({step:"ENTER_EMAIL",susiEntry:ye,operation:"register"})},operation:"register"}):r.createElement(ve.q,a))))},Ne=function(e){var n=e.meteringInfo,t=e.post,i=e.setIsLORegWallVisible,a=(0,F.Av)(),o=!!(0,se.P5)("enable_passwords"),l="LOCKED_POST_SOURCE_SYNDICATED"===t.lockedSource,d=!!(0,U.VB)({name:"enable_mobile_regwall_read_in_app_button",placeholder:!1}),s=(0,Z.s)()||ge.j.lg,c=s===ge.j.xs||s===ge.j.sm;return r.useEffect((function(){a.event("meter.viewed",{meterCount:null==n?void 0:n.postIds.length,postId:t.id,uiType:l?me.j.SyndicatedRegwall:me.j.RegWall}),i&&i(!0),c&&a.event("experiment.eligible",{experimentId:"fd487b2905f"})}),[]),r.createElement(P.cW,{source:{postId:t.id,susiEntry:ye}},r.createElement(j,null,r.createElement(f.x,{display:"flex",textAlign:"center",justifyContent:"center",sm:{flexDirection:"column",textAlign:"center"}},r.createElement(f.x,{padding:"48px 56px",sm:{padding:"28px 16px 48px"}},r.createElement(K.F1,{scale:{xs:"S",sm:"S",md:"M",lg:"M",xl:"M"}},r.createElement(f.x,{display:"none",sm:{display:"block"}},"To keep reading this story, get the free app or log in."),r.createElement(f.x,{display:"block",sm:{display:"none"}},"Read the rest of this story with a free account.")),r.createElement(E.F,{color:"DARKER",scale:{xs:"M",sm:"M",md:"L",lg:"L",xl:"L"},tag:"div"},r.createElement(f.x,{display:"none",sm:{display:"block"}},r.createElement(f.x,{margin:"".concat(o?"40px":"42px"," 0")},r.createElement(de.a,{isButton:!0,postId:t.id,appEntry:"regwall",copy:"".concat(d?"Read in app":"Open in app")})),r.createElement(f.x,{marginBottom:"-20px"},"Or, continue in mobile web")),r.createElement(xe,{meterCount:null==n?void 0:n.postIds.length,postId:t.id,enablePasswords:o}),"Already have an account?"," ",r.createElement(ce.R9,{linkStyle:"OBVIOUS",operation:"login",post:t,susiEntry:ye},"Sign in"))))))},be=(0,o.Ps)(he(),ce.qU),Ee=(0,o.Ps)(Se()),Fe=t(97426);function Pe(){var e=a()(["\n  fragment Wall_meteringInfo on MeteringInfo {\n    ...RegWall_meteringInfo\n  }\n  ","\n"]);return Pe=function(){return e},e}function we(){var e=a()(["\n  fragment Wall_post on Post {\n    content(postMeteringOptions: $postMeteringOptions) {\n      isLockedPreviewOnly\n    }\n    isLocked\n    isMarkedPaywallOnly\n    ...MemberOnlyWall_post\n    ...PayWall_post\n    ...RegWall_post\n  }\n  ","\n  ","\n  ","\n"]);return we=function(){return e},e}var Ie=(0,o.Ps)(we(),c,le,be),_e=(0,o.Ps)(Pe(),Ee),Ce=function(e){var n=e.post,t=e.meteringInfo,i=e.excludePadding,a=e.setIsLORegWallVisible,o=n.id,l=n.content.isLockedPreviewOnly,d=(0,V.H)(),s=d.value,c=d.loading;if(!(0,Fe.n)(o,l).loading&&l){if(s)return r.createElement(re,{post:n,excludePadding:i});if(!c)return r.createElement(Ne,{post:n,meteringInfo:t,setIsLORegWallVisible:a})}return null}},6455:(e,n,t)=>{"use strict";t.d(n,{h:()=>O});var i=t(59713),a=t.n(i),o=t(67294),r=t(70405),l=t(12291),d=t(28655),s=t.n(d),c=t(319),m=t.n(c),u=t(82492),p=t.n(u),v=t(71439),k=t(68254),g=t.n(k),f=t(20512),S=t(46696),h=t(78870),y=t(15085),x=t(50458),N=t(68216);function b(){var e=s()(["\n  fragment PostJsonLd_post on Post {\n    id\n    title\n    seoTitle\n    mediumUrl\n    creator {\n      name\n      username\n      ...userUrl_user\n    }\n    collection {\n      id\n      name\n      domain\n      slug\n      logo {\n        id\n        originalWidth\n        originalHeight\n      }\n    }\n    previewImage {\n      id\n      focusPercentX\n      focusPercentY\n      originalWidth\n      originalHeight\n    }\n    isLocked\n    firstPublishedAt\n    updatedAt\n    isShortform\n    shortformType\n    structuredData\n    ...getTitleForPost_post\n  }\n  ","\n  ","\n"]);return b=function(){return e},e}function E(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function F(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?E(Object(t),!0).forEach((function(n){a()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):E(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var P=(0,l.$j)((function(e){var n=e.config,t=n.productName,i=n.defaultImages,a=n.collectionStructuredData,o=e.navigation;return{currentLocation:o.currentLocation,host:o.host,productName:t,defaultImages:i,collectionStructuredData:a}}))((function(e){var n=e.currentLocation,t=e.host,i=e.post,a=e.postDescription,l=e.productName,d=e.defaultImages,s=e.collectionStructuredData,c=i.collection,u=i.creator,v=i.id,k=i.mediumUrl,N=i.isLocked,b=i.previewImage,E=i.firstPublishedAt,P=i.updatedAt,w=i.structuredData,I=(0,y._t)(i,l),_={id:d.postLogo.imageId,originalWidth:d.postLogo.width,originalHeight:d.postLogo.height},C={id:d.orgLogo.imageId,originalWidth:d.orgLogo.width,originalHeight:d.orgLogo.height},O=c?{"@type":"Organization",name:c.name,url:c.domain||(0,h.l1)(t,(0,x.WGd)(c,n)),logo:function(e){if(!e||!e.logo||!e.logo.id)return(0,f.lc)(C);var n=(0,f.lc)(e.logo);return n&&60===n.height&&n.width<=600?n:(0,f.lc)(C)}(c)}:{"@type":"Organization",name:l,url:(0,h.l1)(t,"/"),logo:(0,f.lc)(C)};c&&s&&s[c.id]&&p()(O,s[c.id].data);var D=b&&b.id?(0,f.Y4)(F(F({},b),{},{miroId:b.id,croppedWidth:1200})):(0,f.NJ)({url:(0,S.W6)({miroId:_.id,width:_.originalWidth}),height:_.originalHeight,width:_.originalWidth}),A=a||"",T=N?{isAccessibleForFree:"False",hasPart:{"@type":"WebPageElement",isAccessibleForFree:"False",cssSelector:".meteredContent"}}:{},M={"@context":"http://schema.org"},R=F({"@type":"NewsArticle",image:D,url:k,dateCreated:E&&new Date(E).toISOString(),datePublished:E&&new Date(E).toISOString(),dateModified:P&&new Date(P).toISOString(),headline:I,name:I,description:A,identifier:v,author:u&&u.name&&u.username?{"@type":"Person",name:u.name||u.username,url:(0,x.AWr)(u,t)}:null,creator:u&&[u.name],publisher:O,mainEntityOfPage:k},T),L=F(F({},M),R);if(w&&w.length>0)try{var B=JSON.parse(w);if(B&&null!=B&&B["@graph"]&&(null==B?void 0:B["@graph"].length)>0){var j=((null==B?void 0:B["@graph"])||[]).filter((function(e){return(null==e?void 0:e["@type"])&&"NewsArticle"!==(null==e?void 0:e["@type"])}));j&&j.length>0&&(L=F(F({},M),{},{"@graph":[R].concat(m()(j))}))}}catch(e){}return o.createElement(r.q,null,o.createElement("script",{type:"application/ld+json"},g()(L,{isJSON:!0})))})),w=((0,v.Ps)(b(),y.bq,N.$m),t(21372)),I=t(22680);function _(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function C(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?_(Object(t),!0).forEach((function(n){a()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):_(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var O=(0,l.$j)((function(e){return{authDomain:e.config.authDomain,host:e.navigation.host,productName:e.config.productName}}))((function(e){var n,t,i,a=e.authDomain,l=e.productName,d=e.post,s=d.canonicalUrl,c=d.collection,m=d.creator,u=d.id,p=d.latestPublishedAt,v=d.mediumUrl,k=d.previewContent,g=d.socialTitle,f=d.socialDek,h=d.visibility,N=d.isShortform,b=m&&m.name,E=(0,y.yB)(d),F=d.title||"",_=E.latestTitle||F;if(N){var O=C(C({},d),{},{title:_});t=(0,y.oS)(O,l,E.hasTitleGraf).trim(),i=(0,I.OO)(d,E.hasTitleGraf)}else t=(0,y._t)(d,l,E,!0).trim(),i=(0,I.j7)(d);var D,A,T=f||k&&k.subtitle||i;if(d&&d.previewImage&&d.previewImage.id&&!d.isLimitedState){var M=d.previewImage;D=(0,S.vz)({miroId:M.id,aspectRatio:1.9,croppedWidth:M.originalWidth?Math.min(M.originalWidth,1200):1200,originalWidth:M.originalWidth,originalHeight:M.originalHeight,focusPercentX:M.focusPercentX,focusPercentY:M.focusPercentY})}else if(d.isLimitedState){var R={id:"1*3SjgcTt7wCYYS10ff6-0JQ.png",originalWidth:748,originalHeight:390,focusPercentX:50,focusPercentY:40};D=(0,S.vz)({miroId:R.id,aspectRatio:1.9,croppedWidth:R.originalWidth?Math.min(R.originalWidth,1200):1200,originalWidth:R.originalWidth,originalHeight:R.originalHeight,focusPercentX:R.focusPercentX,focusPercentY:R.focusPercentY})}m&&m.username&&(A=(0,x.AWr)(m,a));var L=(0,x.CK_)(u),B=!(null!==(n=(0,y.c_)(d))&&void 0!==n&&n.shouldIndexPost),j=p&&new Date(p).toISOString(),U=(0,w.Vd)(d.readingTime||0),V=m&&m.twitterScreenName,W=c&&c.twitterUsername||"Medium",H=c&&c.facebookPageId,z=g||F||_;d.isLimitedState&&(z="");var G=d.isLimitedState?"":T,Y=o.useMemo((function(){var e;return o.createElement(r.q,null,o.createElement("meta",{property:"og:type",content:"article"}),j&&o.createElement("meta",{property:"article:published_time",content:j}),o.createElement("title",null,t),o.createElement("meta",{name:"title",content:t}),o.createElement("meta",{property:"og:title",content:z}),o.createElement("meta",{property:"twitter:title",content:z}),H&&o.createElement("meta",{property:"fb:pages",content:H}),o.createElement("meta",{name:"twitter:site",content:"@".concat(W)}),o.createElement("meta",{name:"twitter:app:url:iphone",content:L}),o.createElement("meta",{property:"al:android:url",content:L}),o.createElement("meta",{property:"al:ios:url",content:L}),o.createElement("meta",{property:"al:android:app_name",content:"Medium"}),i&&o.createElement("meta",{name:"description",content:i}),T&&o.createElement("meta",{property:"og:description",content:G}),T&&o.createElement("meta",{property:"twitter:description",content:G}),o.createElement("meta",{property:"og:url",content:null!=v?v:void 0}),o.createElement("meta",{property:"al:web:url",content:null!=v?v:void 0}),D&&o.createElement("meta",{property:"og:image",content:D}),D&&o.createElement("meta",{name:"twitter:image:src",content:D}),o.createElement("meta",{name:"twitter:card",content:D?"summary_large_image":"summary"}),A&&o.createElement("meta",{property:"article:author",content:A}),A&&o.createElement("link",{rel:"author",href:A}),V&&o.createElement("meta",{name:"twitter:creator",content:"@".concat(V)}),b&&o.createElement("meta",{name:"author",content:b}),o.createElement("link",{rel:"canonical",href:null!==(e=s||v)&&void 0!==e?e:void 0}),o.createElement("link",{rel:"alternate",href:(0,x.zix)((0,x.o2w)("medium.com",d.id))}),o.createElement("meta",{name:"robots",content:"".concat(B?"noindex":"index",",follow,max-image-preview:large")}),o.createElement("meta",{name:"referrer",content:"UNLISTED"!==h?"unsafe-url":"origin"}),o.createElement("meta",{name:"twitter:label1",content:"Reading time"}),o.createElement("meta",{name:"twitter:data1",content:"".concat(U," min read")}))}),[t,s,v,D,u,g,i,A,b,V,L,B,j]);return o.createElement(o.Fragment,null,Y,o.createElement(P,{post:d,postDescription:i}))}))},45114:(e,n,t)=>{"use strict";t.d(n,{kD:()=>k,T8:()=>g,Qw:()=>f});var i,a,o=t(59713),r=t.n(o),l=t(28959),d="post-view",s="post-read",c="topic-view",m="medium-search",u="external-search",p=(i={},r()(i,d,200),r()(i,s,200),r()(i,c,200),r()(i,m,200),r()(i,u,200),i),v=(a={},r()(a,d,new l.Z("pv")),r()(a,s,new l.Z("pr")),r()(a,c,new l.Z("tv")),r()(a,m,new l.Z("ms")),r()(a,u,new l.Z("es")),a),k=function(e){S(d,e,Date.now())},g=function(e){S(s,e,Date.now())},f=function(e){S(c,e,Date.now())},S=function(e,n,t){var i=v[e];i.getCount()===p[e]&&i.clean();try{i.set(n,t)}catch(e){i.clean()}}},85763:(e,n,t)=>{"use strict";t.d(n,{bo:()=>x,db:()=>y,uz:()=>N});var i=t(87757),a=t.n(i),o=t(48926),r=t.n(o),l=t(63038),d=t.n(l),s=t(67294),c=t(45114),m=t(25550),u=t(49608),p=t(18627),v=t(80872),k=t(43487),g=t(62896),f=function(){var e=r()(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){try{S((function(n){e(n)}))}catch(e){n(e)}})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function S(e){var n="Unknown";function t(t){e({isPrivate:t,browserName:n})}function i(){void 0!==Promise?navigator.webkitTemporaryStorage.queryUsageAndQuota((function(e,n){var i;t(n<(void 0!==(i=window).performance&&void 0!==i.performance.memory&&void 0!==i.performance.memory.jsHeapSizeLimit?performance.memory.jsHeapSizeLimit:1073741824))}),(function(e){throw new Error("detectIncognito somehow failed to query storage quota: "+e.message)})):(0,window.webkitRequestFileSystem)(0,1,(function(){t(!1)}),(function(){t(!0)}))}!function(){var e=navigator.userAgent,a=navigator.vendor;try{if((0,g.G6)(e))!function(){var e,i,a=window;if(void 0!==navigator.maxTouchPoints)if(void 0!==a.safari&&void 0===a.DeviceMotionEvent)n="Safari for macOS",function(){try{window.safari.pushNotification.requestPermission("https://example.com","private",{},(function(){}))}catch(e){return t(!new RegExp("gesture").test(e))}t(!1)}();else{if(void 0===a.DeviceMotionEvent)throw new Error("detectIncognito Could not identify this version of Safari");n="Safari for iOS",e=!1,(i=document.createElement("iframe")).style.display="none",document.body.appendChild(i),i&&i.contentWindow&&i.contentWindow.applicationCache.addEventListener("error",(function(){return e=!0,t(!0)})),setTimeout((function(){e||t(!1)}),100)}else!function(){var e=window.openDatabase,n=window.localStorage;try{e(null,null,null,null)}catch(e){return t(!0)}try{n.setItem("test","1"),n.removeItem("test")}catch(e){return t(!0)}t(!1)}()}();else if((0,g.i7)(a))n=function(){var e=navigator.userAgent;return e.match(/Chrome/)?e.match(/Edg/)?"Edge":void 0!==navigator.brave?"Brave":void 0!==navigator.opr?"Opera":"Chrome":"Chromium"}(),i();else if((0,g.vU)(e))n="Firefox",t(void 0===navigator.serviceWorker);else{if(void 0===navigator.msSaveBlob)throw new Error("detectIncognito cannot determine the browser");n="Internet Explorer",t(void 0===window.indexedDB)}}catch(e){return n="Unknown",t(!1)}}()}var h=t(15085),y=1,x=2,N=function(e){var n=e.post,t=e.clientViewedContext,i=e.overrideCommonData,o=void 0===i?{}:i,l=(0,p.Av)(),g=(0,m.r)(),S=g.loading,y=g.viewerId,x=(0,k.v9)((function(e){return e.client.viewerIsBot})),N=y&&(0,u.Q)(y),b=(null==n?void 0:n.collection)||{},E=b.id,F=b.slug,P=((null==n?void 0:n.content)||{}).validatedShareKey,w=null==n?void 0:n.id,I=s.useState(!1),_=d()(I,2),C=_[0],O=_[1],D=s.useState(null),A=d()(D,2),T=A[0],M=A[1],R=s.useCallback(r()(a().mark((function e(){var n,t,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f();case 2:t=e.sent,i=null!==(n="Unknown"===t.browserName||t.isPrivate)&&void 0!==n?n:null,O(!0),M(i);case 6:case"end":return e.stop()}}),e)}))),[]);s.useEffect((function(){if(!S&&w&&y&&C){if(null!=n&&n.isPublished){N||(n.isLocked?(0,v.yB)():(0,v.B8)());var e=(0,h.c_)(n),i=e.shouldIndexPost,a=e.indexReason;x&&l.event("post.clientBotCrawled",{postId:w,userId:y,userAgent:navigator.userAgent,lastCrawledAt:Date.now(),isIndexable:i,indexReason:a}),l.event("post.clientViewed",{postId:w,collectionId:E,collectionSlug:F,context:t,isFriendLink:!!P,source:"post_page",isIncognitoMode:T},o)}else l.event("post.draftViewed",{postId:w});return N||(0,c.kD)(w),function(){}}C||R()}),[w,y,S,T,R])}},59142:(e,n,t)=>{"use strict";t.d(n,{t:()=>f});var i=t(67294),a=t(12291),o=t(18702),r=t(25550),l=t(6443),d=t(67701),s=t(69937),c=t(75880),m=t(98067),u=t(77280),p=t(43487),v=t(55765),k=t(50458),g=t(85763),f=function(e){var n=e.post,t=e.meteringInfo,f=e.clientViewedContext,S=void 0===f?g.db:f,h=e.overrideCommonData,y=void 0===h?{}:h;!function(e){var n,t=e.post,g=e.meteringInfo,f=(0,a.I0)(),S=(0,r.r)(),h=S.loading,y=S.viewerId,x=(0,u.PM)(),N=(0,p.v9)((function(e){return e.navigation.referrer})),b=(0,p.v9)((function(e){return e.config.authDomain})),E=null==t?void 0:t.id,F=(0,v.P)(),P=F.inAppBrowser,w=F.loading,I=(0,c.Pd)(null==t?void 0:t.creator),_=I.viewerEdge,C=I.loading,O=(0,d.gY)(null==t?void 0:t.collection),D=O.viewerEdge,A=O.loading,T=(0,s.l)(null==t||null===(n=t.primaryTopic)||void 0===n?void 0:n.id),M=T.viewerEdge,R=T.loading,L=A||C||R,B=(0,l.H)(),j=B.loading,U=B.value;i.useEffect((function(){if(E&&!h&&!j&&y&&!w&&!L){if(null!=t&&t.isPublished){var e=(0,o.RD)({inAppBrowser:P,post:t,meteringInfo:g,referrer:N,referrerSource:x,viewer:U,currentUserId:y,creatorViewerEdge:_,collectionViewerEdge:D,topicViewerEdge:M});t.collection&&t.collection.domain&&(e.data.$canonical_url=(0,k.o2w)(b,E)),(0,o.Pu)(e),f((0,m.aj)(e)),f((0,m.QZ)())}return function(){f((0,m.Uo)())}}}),[E,j,U,h,y,w,P,U,L])}({post:n,meteringInfo:t}),(0,g.uz)({post:n,clientViewedContext:S,overrideCommonData:y})}},82366:(e,n,t)=>{"use strict";t.d(n,{bj:()=>y,O9:()=>h});var i=t(319),a=t.n(i),o=t(57624),r=t(89748),l=t(95538),d=t(19945),s=t(93403),c=t(46786),m=t(10654),u=t(51277),p={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ExpandablePostFooter_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"allowResponses"}},{kind:"Field",name:{kind:"Name",value:"postResponses"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"count"}}]}},{kind:"Field",name:{kind:"Name",value:"isLimitedState"}},{kind:"FragmentSpread",name:{kind:"Name",value:"ExpandablePostCardOverflowButton_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"BookmarkButton_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostFooterSocialPopover_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"MultiVote_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"OverflowMenuButtonWithNegativeSignal_post"}}]}}].concat(a()(d.D.definitions),a()(s.z.definitions),a()(c.u.definitions),a()(m.x.definitions),a()(u.v.definitions))},v=t(56785),k=t(69724),g=t(43992),f=t(22447),S=t(77878),h=([{kind:"FragmentDefinition",name:{kind:"Name",value:"ExpandablePost_meteringInfo"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MeteringInfo"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Wall_meteringInfo"}}]}}].concat(a()(o.Y.definitions)),{kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ExpandablePost_user"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"username"}},{kind:"FragmentSpread",name:{kind:"Name",value:"CardByline_user"}}]}}].concat(a()(r.br.definitions))}),y={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ExpandablePost_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ExpandablePost_user"}}]}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"CardByline_collection"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"InteractivePostBody_postPreview"}},{kind:"Field",name:{kind:"Name",value:"firstPublishedAt"}},{kind:"Field",name:{kind:"Name",value:"isLocked"}},{kind:"Field",name:{kind:"Name",value:"isSeries"}},{kind:"Field",name:{kind:"Name",value:"isShortform"}},{kind:"Field",name:{kind:"Name",value:"latestPublishedAt"}},{kind:"Field",name:{kind:"Name",value:"inResponseToCatalogResult"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"mediumUrl"}},{kind:"Field",name:{kind:"Name",value:"postResponses"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"count"}}]}},{kind:"Field",name:{kind:"Name",value:"previewImage"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"focusPercentX"}},{kind:"Field",name:{kind:"Name",value:"focusPercentY"}}]}},{kind:"Field",name:{kind:"Name",value:"readingTime"}},{kind:"Field",name:{kind:"Name",value:"sequence"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"slug"}}]}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"uniqueSlug"}},{kind:"Field",name:{kind:"Name",value:"visibility"}},{kind:"FragmentSpread",name:{kind:"Name",value:"CardByline_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"ExpandablePostFooter_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"InResponseToEntityPreview_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostScrollTracker_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"ReadMore_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"HighDensityPreview_post"}}]}}].concat(a()(h.definitions),a()(r.We.definitions),a()(l.m.definitions),a()(r.yu.definitions),a()(p.definitions),a()(v.V.definitions),a()(k.k.definitions),a()(g.q.definitions),a()(f.U.definitions))};[{kind:"FragmentDefinition",name:{kind:"Name",value:"ExpandablePostmergeContent_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"bodyModel"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"paragraphs"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"text"}},{kind:"FragmentSpread",name:{kind:"Name",value:"markupPostBodyParagraphs_paragraph"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"extendedPreviewContent"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"bodyModel"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"paragraphs"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"text"}},{kind:"FragmentSpread",name:{kind:"Name",value:"markupPostBodyParagraphs_paragraph"}}]}}]}}]}}]}}].concat(a()(S.RF.definitions))},7484:(e,n,t)=>{"use strict";t.d(n,{m:()=>en});var i=t(67154),a=t.n(i),o=t(59713),r=t.n(o),l=t(63038),d=t.n(l),s=t(82492),c=t.n(s),m=t(46829),u=t(67294),p=t(5977),v=t(8459),k=t(25145),g=t(58098),f=t(36370),S=t(54701),h=t(99323),y=t(61796),x=t(6455),N=t(7834),b=t(85763),E=t(59142),F=t(96820),P=t(85256),w=t(68717),I=t(6443),_=t(81281),C=t(77355),O=t(96370),D=t(68349),A=t(18627),T=t(66411),M=t(99849),R=t(68821),L=t(96451),B=t(18305),j=t(92661),U=t(97217),V=t(77280),W=t(43487),H=t(3394),z=t(35010),G=t(51213),Y=t(78870),q=t(59764),K=t(42140),$=t(50458),Q=t(14646);function X(){return(X=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e}).apply(this,arguments)}var J=u.createElement("circle",{cx:16,cy:16,r:16,fill:"#292929"}),Z=u.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.77 16.48l5.4 5.4.7-.7-5.4-5.4 4.7-4.7-.71-.7-4.69 4.69-4.69-4.7-.7.71 4.68 4.7-5.4 5.4.71.7 5.4-5.4z",fill:"#FAFAFA"});const ee=function(e){return u.createElement("svg",X({width:32,height:32,fill:"none"},e),J,Z)};var ne=function(){return{border:"none",padding:"0",background:"transparent",cursor:"pointer"}},te={xs:"60px",sm:"60px",md:"40px",lg:"40px",xl:"40px"},ie=function(e){var n=e.expansionRef,t=e.basePostUrl,i=e.referrer,a=e.referrerSource,o=(0,Q.I)(),r=(0,p.k6)(),l=(0,h.sK)().clearExpandedState,d=(0,A.Av)();return u.createElement(C.x,{position:"sticky",top:te,height:"0",textAlign:"right",float:"right",marginRight:{xs:"0px",sm:"0px",md:"-42px",lg:"-42px",xl:"-42px"}},u.createElement(C.x,{bottom:"20px"},u.createElement("button",{type:"button",className:o(ne),onClick:function(){var e,o=null===(e=n.current)||void 0===e?void 0:e.getBoundingClientRect().y;o&&o<0&&window.scrollBy(0,o),l(),r.goBack(),d.event("client.navigate",{metadata:{},newPath:i||"",oldPath:t||"",source:a||""})},"aria-label":"Collapse"},u.createElement(ee,null))))},ae=t(319),oe=t.n(ae),re=t(95538),le=t(57624),de=t(82366),se=t(71069),ce={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"InlineExpansionContext_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"customStyleSheet"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"blogroll"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"visibility"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"isAuroraVisible"}},{kind:"Field",name:{kind:"Name",value:"followedCollections"}},{kind:"Field",name:{kind:"Name",value:"socialStats"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"followingCount"}},{kind:"Field",name:{kind:"Name",value:"collectionFollowingCount"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"UserSubscribeButton_user"}}]}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"canToggleEmail"}},{kind:"Field",name:{kind:"Name",value:"description"}},{kind:"Field",name:{kind:"Name",value:"isAuroraEligible"}},{kind:"Field",name:{kind:"Name",value:"isAuroraVisible"}},{kind:"Field",name:{kind:"Name",value:"viewerEdge"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"isEditor"}}]}},{kind:"Field",name:{kind:"Name",value:"tagline"}}]}},{kind:"Field",name:{kind:"Name",value:"customStyleSheet"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"blogroll"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"visibility"}}]}}]}}]}}].concat(oe()(se.w.definitions))},me=t(10774),ue=t(60918),pe=t(96396),ve=t(34287),ke={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"usePostBranchView_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"isPublished"}},{kind:"Field",name:{kind:"Name",value:"isLocked"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"slug"}},{kind:"Field",name:{kind:"Name",value:"domain"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"buildBranchViewData_post"}}]}}].concat(oe()(ve.i.definitions))},ge=([{kind:"FragmentDefinition",name:{kind:"Name",value:"usePostBranchView_meteringInfo"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MeteringInfo"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"buildBranchViewData_meteringInfo"}}]}}].concat(oe()(ve.P.definitions)),t(32934)),fe={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"usePostClientViewedReporter_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"isPublished"}},{kind:"Field",name:{kind:"Name",value:"isLocked"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"slug"}}]}},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[{kind:"Argument",name:{kind:"Name",value:"postMeteringOptions"},value:{kind:"Variable",name:{kind:"Name",value:"postMeteringOptions"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"validatedShareKey"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"shouldIndexPost_post"}}]}}].concat(oe()(ge.HF.definitions))},Se={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ExpandablePostExpandedQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postMeteringOptions"}},type:{kind:"NamedType",name:{kind:"Name",value:"PostMeteringOptions"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"postResult"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"slug"}}]}},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[{kind:"Argument",name:{kind:"Name",value:"postMeteringOptions"},value:{kind:"Variable",name:{kind:"Name",value:"postMeteringOptions"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"bodyModel"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"paragraphs"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"text"}}]}}]}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"InteractivePostBody_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"Wall_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"ExpandablePost_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"InlineExpansionContext_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostReadTracker_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostRightColumn_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostMetadata_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"MeterController_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"usePostBranchView_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"usePostClientViewedReporter_post"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"meterPost"},arguments:[{kind:"Argument",name:{kind:"Name",value:"postId"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}},{kind:"Argument",name:{kind:"Name",value:"postMeteringOptions"},value:{kind:"Variable",name:{kind:"Name",value:"postMeteringOptions"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MeteringInfo"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"maxUnlockCount"}},{kind:"FragmentSpread",name:{kind:"Name",value:"Wall_meteringInfo"}}]}}]}}]}}].concat(oe()(re.U.definitions),oe()(le.r.definitions),oe()(de.bj.definitions),oe()(ce.definitions),oe()([{kind:"FragmentDefinition",name:{kind:"Name",value:"PostReadTracker_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"slug"}}]}},{kind:"Field",name:{kind:"Name",value:"sequence"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sequenceId"}}]}},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[{kind:"Argument",name:{kind:"Name",value:"postMeteringOptions"},value:{kind:"Variable",name:{kind:"Name",value:"postMeteringOptions"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isLockedPreviewOnly"}}]}}]}}]),oe()(me.w.definitions),oe()(ue.i.definitions),oe()(pe.W.definitions),oe()(ke.definitions),oe()(fe.definitions),oe()(le.Y.definitions))},he=t(66392),ye=t(28655),xe=t.n(ye),Ne=t(71439),be=t(91743),Ee=t(51277),Fe=t(7830),Pe=t(50455),we=t(74543),Ie=t(95696),_e=t(19945),Ce=t(70185),Oe=t(89920),De=t(21232),Ae=t(25735),Te=t(75399),Me=t(93310);function Re(){var e=xe()(["\n  fragment ExpandablePostFooter_post on Post {\n    id\n    allowResponses\n    postResponses {\n      count\n    }\n    isLimitedState\n    ...ExpandablePostCardOverflowButton_post\n    ...BookmarkButton_post\n    ...PostFooterSocialPopover_post\n    ...MultiVote_post\n    ...OverflowMenuButtonWithNegativeSignal_post\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return Re=function(){return e},e}(0,Ne.Ps)(Re(),_e.D,Pe.z,we.u,Ce.x,Ee.v);var Le=function(e){var n=e.post,t=e.publisherContext,i=e.isActiveExpandedPost,a=e.actionsMenu,o=e.showNegativeSignalMenu,r=u.useContext(De.f).openSidebar,l=(0,h.sK)(),d=l.expandedPostId,s=l.postInView,c=(0,Fe.SK)(),m=n.clapCount,p=n.mediumUrl,v=n.postResponses,k=Boolean(m),g=(null==v?void 0:v.count)||0,f={post:n,source:"expandable_post_footer"},S=(0,Ae.VB)({name:"enable_seamless_social_sharing",placeholder:!1});return u.createElement(C.x,{display:"flex",justifyContent:"space-between",alignItems:"center"},u.createElement(C.x,{display:"flex",alignItems:"center"},u.createElement(Ce.S,{post:n,buttonStyle:"SUBTLE_MARGIN",susiEntry:"clap_preview",hasDialog:!0,shouldHideClapsText:!0}),u.createElement(C.x,{display:"flex",alignItems:"center",xl:{marginLeft:k?"24px":"12px"},lg:{marginLeft:k?"24px":"12px"},md:{marginLeft:k?"16px":"8px"},sm:{marginLeft:k?"0":"8px"},xs:{marginLeft:k?"0":"8px"}},u.createElement(Me.r,{href:p+"?responsesOpen=true"},u.createElement(Oe.h,{svgSize:c?"S":void 0,trackingData:{postId:n.id},responsesCount:g,handleClick:s&&d===n.id?function(e){e.preventDefault(),r()}:function(){},allowResponses:n.allowResponses,isLimitedState:n.isLimitedState,responsesCountColor:"DARKER",countStylesOverride:{marginLeft:"4px"}})))),u.createElement(C.x,{display:"flex",alignItems:"center"},i&&S?u.createElement(Te.U,f):u.createElement(we.$,f),u.createElement(C.x,{margin:"0 6px 0 7px"},u.createElement(Pe.e,{post:n,susiEntry:"bookmark_preview"})),a||t&&(o?u.createElement(be.t,{post:n,isActiveExpandedPost:i}):u.createElement(C.x,{marginRight:"-4px"},u.createElement(Ie.u,{post:n,publisherContext:t})))))},Be=t(27549),je=t(45932),Ue=["100%","95%","93%","98%","98%"],Ve=function(){return u.createElement(C.x,{width:"100%"},Ue.map((function(e,n){return u.createElement(C.x,{key:"placeholder-".concat(n),width:e,height:"16px",marginBottom:"18px",backgroundColor:"BASE_NORMAL"})})))},We=function(){var e=(0,Q.I)(),n=(0,je.P)();return u.createElement("div",{className:e((function(){return n}))},u.createElement(Ve,null))},He=t(87691),ze=t(48342),Ge=function(e){var n=e.onReadMore,t=e.post,i=e.padding,a=void 0===i?"34px 0 0 0":i,o=(0,k.D)(),r=(0,Fe.SK)(),l=o(t),d=t.readingTime,s=(0,Y.Rk)(l,{readmore:"1"});return u.createElement(Me.r,{href:s,onClick:n,display:"block"},u.createElement(C.x,{padding:a},u.createElement(He.F,{color:r?"DARKER":"ACCENT",scale:"M"},"Read more · "," ",u.createElement(ze.K,{readingTime:d,isLighterText:r}))))},Ye=function(e){var n=e.href,t=e.onReadMore,i=(0,Q.I)();return u.createElement(Me.r,{href:n,onClick:t},u.createElement("div",{className:i((function(e){return{position:"absolute",top:0,backgroundColor:e.backgroundColor,height:"100%",width:"100%",opacity:"80%",zIndex:"1"}}))}))};function qe(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function Ke(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?qe(Object(t),!0).forEach((function(n){r()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):qe(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var $e=function(e){return{border:0,height:"1px",backgroundColor:e.baseColor.border.lighter,margin:0}},Qe={xs:{marginTop:"32px",marginBottom:"30px"},sm:{marginTop:"32px",marginBottom:"30px"},md:{marginTop:"40px",marginBottom:"50px"},lg:{marginTop:"40px",marginBottom:"50px"},xl:{marginTop:"40px",marginBottom:"50px"}},Xe={xs:{marginTop:"30px",marginBottom:"30px"},sm:{marginTop:"30px",marginBottom:"30px"},md:{marginTop:"50px",marginBottom:"50px"},lg:{marginTop:"50px",marginBottom:"50px"},xl:{marginTop:"50px",marginBottom:"50px"}},Je=[U.NJ.H3,U.NJ.H4],Ze=[U.NJ.IMG,U.NJ.IFRAME],en=u.memo((function(e){var n,t,i,o,l,s,U,Q,X=e.post,J=e.excludeMargin,Z=void 0!==J&&J,ee=e.includeTopDivider,ne=void 0===ee||ee,te=e.includeBottomDivider,ae=void 0!==te&&te,oe=e.isFirst,re=void 0!==oe&&oe,le=e.publisher,de=e.hideAuthor,se=void 0!==de&&de,ce=e.index,me=e.maxWidthSize,ue=void 0===me?"inset":me,pe=e.showInResponseToEntityPreview,ve=void 0!==pe&&pe,ke=e.mayShowPinned,ge=void 0!==ke&&ke,fe=e.showHighDensityPreview,ye=void 0!==fe&&fe,xe=e.highDensityPreviewReason,Ne=e.showBylinePublisherInfo,be=void 0!==Ne&&Ne,Ee=e.isMediumApp,Fe=void 0!==Ee&&Ee,Pe=e.showNegativeSignalMenu,we=void 0!==Pe&&Pe,Ie=e.footerActionsMenu,_e=!!(0,I.H)().value,Ce=Fe?"app":ue,Oe=u.useRef(null),De=u.useRef(null),Ae=u.useRef(null),Te=u.useState(!1),Me=d()(Te,2),Re=Me[0],je=Me[1],Ue=(0,h.sK)(),Ve=Ue.expandedPostId,He=Ue.setExpandedPostId,ze=Ue.expandedPost,qe=Ue.setExpandedPost,en=Ue.postInView,nn=Ue.setPostInView,tn=Ue.clearExpandedState,an=(null==ze?void 0:ze.id)===X.id,on=(0,G.D)(ze),rn=(0,A.Av)(),ln=(0,V.G1)(),dn=(0,T.Lk)(),sn=Ke(Ke({},dn),{},{index:ce}),cn=(0,V.he)(),mn=(0,W.v9)((function(e){return e.navigation.referrer}));an&&(mn=cn);var un=(0,k.D)(),pn=(0,T.f0)(sn),vn=un(X),kn=(0,Y.Rk)(vn,{source:pn});(0,M.t)(_e,Oe,ze,an);var gn=u.useRef(null);(0,R.V)(gn,X,an);var fn=X.id,Sn=X.collection,hn=X.extendedPreviewContent,yn=X.isLocked,xn=X.firstPublishedAt,Nn=X.latestPublishedAt,bn=X.mediumUrl,En=X.pinnedAt,Fn=X.pinnedByCreatorAt,Pn=X.visibility,wn=(0,p.k6)(),In=(0,V.PM)();dn&&an&&(In=(0,T.f0)(dn));var _n={referrer:mn,sk:ln,source:In},Cn=(0,m.useLazyQuery)(Se,{variables:{postId:X.id,postMeteringOptions:_n}}),On=d()(Cn,2),Dn=On[0],An=On[1],Tn=An.called,Mn=An.data,Rn=An.loading,Ln=An.error,Bn=null==Mn?void 0:Mn.meterPost,jn=an&&"Post"===(null==ze?void 0:ze.__typename)?ze:null;(0,E.t)({post:jn,meteringInfo:Bn,clientViewedContext:b.bo,overrideCommonData:{referrer:mn,referrerSource:In}}),u.useEffect((function(){if(!Rn&&Ve===X.id){var e=new URL(kn).pathname;if(Ln)wn.push({pathname:e});else if(Tn){var n=null==Mn?void 0:Mn.postResult;if((0,q.f)(n)){try{var t=function(e,n){var t,i,a,o,r,l,d,s;if(null==e||null===(t=e.extendedPreviewContent)||void 0===t||null===(i=t.bodyModel)||void 0===i||null===(a=i.paragraphs)||void 0===a||!a.length)throw new Error("Expected post to have preview content.");e.extendedPreviewContent.bodyModel.paragraphs;var m=new Map;null!=e&&null!==(o=e.extendedPreviewContent)&&void 0!==o&&null!==(r=o.bodyModel)&&void 0!==r&&null!==(l=r.paragraphs)&&void 0!==l&&l.length&&e.extendedPreviewContent.bodyModel.paragraphs.forEach((function(e){m.set(e.name,e)}));var u=[],p=(e.content.bodyModel.paragraphs,[]);null!=e&&null!==(d=e.content)&&void 0!==d&&null!==(s=d.bodyModel)&&void 0!==s&&s.paragraphs&&e.content.bodyModel.paragraphs.forEach((function(e){var n,t,i=m.get(e.name);i&&(null===(n=i.text)||void 0===n?void 0:n.length)===(null===(t=e.text)||void 0===t?void 0:t.length)?u.push(i):p.push(e)}));var v=[].concat(u,p);return c()({},e,{content:Ke(Ke(Ke({},e.extendedPreviewContent),e.content),{},{isFullContent:!0,bodyModel:Ke(Ke(Ke({},e.extendedPreviewContent.bodyModel),e.content.bodyModel),{},{paragraphs:(0,F.e)(v,n,!1)})})})}(n,kn);He(t.id),qe(t)}catch(n){wn.push({pathname:e})}je(!1)}else wn.push({pathname:e})}else Dn()}}),[Ve,Tn,Rn,Mn,Ln,kn]),u.useEffect((function(){an&&rn.event("client.navigate",{metadata:{},newPath:vn||"",oldPath:mn||"",source:In||""})}),[an]);var Un=u.useCallback((function(e){var n;if(!e||!e.metaKey&&1!==e.button){e&&e.preventDefault(),je(!0);var t=null===(n=De.current)||void 0===n?void 0:n.getBoundingClientRect();null!=t&&t.top&&(Ae.current=t.top),He(X.id),nn(!0)}}),[]),Vn=u.useCallback((function(){Tn||Dn()}),[Tn]);(0,z.L)((function(){var e,n=null===(e=De.current)||void 0===e?void 0:e.getBoundingClientRect();if(null!=ze&&ze.id&&an&&n){var t=n.top-(Ae.current||0);Boolean(t)&&null!=on&&on.id&&on.id!==ze.id&&window.scrollBy(0,t)}}),[null==ze?void 0:ze.id,an]);var Wn=wn.location,Hn=u.useCallback((function(e){if(null!=ze&&ze.id&&e){var n=new URL(kn).pathname,t=(0,K.d)(Wn.search.slice(1)).p===X.id||n===Wn.pathname,i=!!e.intersectionRatio;if(!i&&t)return nn(!1),void wn.goBack();if(i&&!t){var a,o,r=(null===(a=Wn.state)||void 0===a?void 0:a.preExpandedLocation)||Wn,l={pathname:Wn.pathname,search:"?p=".concat(ze.id),state:{preExpandedLocation:r}};return Fe&&(l={pathname:n,state:{preExpandedLocation:r}}),window.history.scrollRestoration="manual",nn(!0),void(null!==(o=Wn.state)&&void 0!==o&&o.preExpandedLocation?wn.replace(l):wn.push(l))}}}),[X.id,null==ze?void 0:ze.id,wn,Wn,kn]),zn=u.useCallback((function(){return!an}),[an]);(0,L.S)({onIntersect:Hn,target:De,disconnect:zn},[an,Hn]);var Gn=(0,j.$B)(Wn.pathname);u.useEffect((function(){var e=Gn?(0,$.mrd)(Gn):null;en?"post"===(null==Gn?void 0:Gn.route.mediumAppPage)&&e===Ve||tn():"post"===(null==Gn?void 0:Gn.route.mediumAppPage)&&e===X.id&&(Un(),De.current&&De.current.scrollIntoView(!0))}),[null==Gn?void 0:Gn.route.mediumAppPage,null==Gn?void 0:Gn.params.postId]);var Yn=u.useRef(!1);if(u.useEffect((function(){Yn.current=an}),[an]),u.useEffect((function(){return function(){Yn.current&&tn()}}),[]),null==X||null===(n=X.extendedPreviewContent)||void 0===n||!n.bodyModel)return null;var qn=null==X||null===(t=X.extendedPreviewContent)||void 0===t?void 0:t.bodyModel;if(!qn)return null;var Kn=Ke(Ke({},qn),{},{paragraphs:(0,F.e)(qn.paragraphs,kn)}),$n=!!En&&!!Nn,Qn=$n?Nn:xn,Xn=$n?"Updated ":"",Jn=!(null==X||null===(i=X.extendedPreviewContent)||void 0===i||!i.isFullContent),Zn=ne&&!re&&u.createElement(_.V,{styleRules:$e}),et=ae&&u.createElement(_.V,{styleRules:$e}),nt=Fe?{}:re?Qe:Xe,tt={postId:fn,collectionId:null==Sn?void 0:Sn.id,isFullPost:null==hn?void 0:hn.isFullContent,postVisibility:(0,P.z)(Pn),context:2,pinned:Boolean(En)},it="User"===(null==le?void 0:le.__typename)&&X.collection?X.collection:X.creator,at="User"===(null==le?void 0:le.__typename),ot="Collection"===(null==le?void 0:le.__typename),rt="User"===(null==le?void 0:le.__typename)?Fn:En,lt=(0,y.LI)(Kn.paragraphs),dt="number"==typeof lt.titleIndex?void 0:40,st=u.createElement(u.Fragment,{key:"card-byline-and-mixtape"},Fe&&X.creator&&!at?u.createElement(he.iN,{creator:X.creator,collection:X.collection,href:kn,datePrefix:Xn,publishedAt:Qn,showStar:!!yn,showPinned:ge&&!!rt,post:X,showPublisherInfo:be,showCollectionName:!ot}):it&&u.createElement(w.u_,{publisher:it,hideAuthor:at||se,href:kn,isOneLine:!0,datePrefix:Xn,publishedAt:Qn,showStar:!!yn,showPinned:ge&&!!rt,post:X}),ve&&u.createElement(S.h,{padding:"24px 0 0",post:X,postPreviewMarginBottom:dt})),ct=Kn.paragraphs[0]&&Ze.includes(Kn.paragraphs[0].type)&&Kn.paragraphs[0].name,mt=Kn.paragraphs[1]&&Je.includes(Kn.paragraphs[1].type)&&Kn.paragraphs[1].name,ut=le||X.creator,pt=!(Jn||an||Re||!bn||!ut),vt=yn&&(2===Kn.paragraphs.length||3===Kn.paragraphs.length)&&1===qn.sections.length&&mt&&ct,kt=Kn.paragraphs[0],gt=Kn.paragraphs[1],ft={insertType:"BYLINE",order:"before",component:st},St={insertType:"MEDIA_OVERLAY",order:"after",component:u.createElement(Ye,{key:"shortform-media-overlay-insert",href:kn,onReadMore:Un})},ht=null!=gt&&gt.name&&null!=kt&&kt.name?(o={},r()(o,gt.name,[ft]),r()(o,kt.name,[St]),o):{},yt=vt&&!an,xt=vt&&!Fe,Nt=!ye||an,bt="number"==typeof lt.titleIndex?Kn.paragraphs[lt.titleIndex].text:null,Et="number"==typeof lt.subtitleIndex?Kn.paragraphs[lt.subtitleIndex].text:null;Fe&&(!Et||Et.length<400)&&(Et=Kn.paragraphs.reduce((function(e,n,t){return t!==lt.titleIndex&&t!==lt.subtitleIndex&&t!==lt.kickerIndex&&!Ze.includes(n.type)&&(null===e||e.length<400)?null===e?n.text:e+" "+n.text:e}),null!==Et?Et+" — ":null));var Ft=yn?{className:"meteredContent"}:{};return u.createElement(T.cW,{source:sn},an&&"Post"===(null==Mn||null===(l=Mn.postResult)||void 0===l?void 0:l.__typename)&&u.createElement(x.h,{post:Mn.postResult}),u.createElement("article",Ft,u.createElement(C.x,a()({ref:De,boxSizing:"content-box",marginLeft:"auto",marginRight:"auto"},Z?{}:nt),u.createElement(O.P,{size:Ce},Zn,u.createElement(B.o,{post:Ke(Ke({},X),{},{previewContent:{isFullContent:Jn}}),presentationContext:"POST_PREVIEW",isDisplayingFullPost:Jn||an,suppressedEvents:Jn?"VIEWED":void 0,shouldReportClientViewed:an,reportClientViewedOnFullPost:!0,postClientViewedContext:2,pinned:!!En},u.createElement(C.x,{paddingTop:Zn?xt?{xs:"48px",sm:"48px",md:"72px",lg:"72px",xl:"72px"}:"24px":void 0},it&&!xt&&st,Fe&&an&&u.createElement(ie,{expansionRef:De,basePostUrl:vn,referrer:mn,referrerSource:In}),an&&!(null==ze||!ze.isLocked)&&!!Bn&&"Post"===(null==Mn||null===(s=Mn.postResult)||void 0===s?void 0:s.__typename)&&u.createElement(C.x,{margin:"0 16px"},u.createElement(g.rh,{meteringInfo:Bn,post:Mn.postResult})),u.createElement(C.x,{marginTop:vt?"":"12px",ref:gn},u.createElement(H.O1,{event:{eventName:"post.permalinkClicked",data:Ke(Ke({},tt),{},{interfaceElement:"title"})}},u.createElement(Be.$,{post:X,postUrl:kn,index:ce,reason:xe,publisherContext:null===(U=X.creator)||void 0===U?void 0:U.__typename,showPreview:ye,showContent:Re||an,titleText:bt,subTitleText:Et,onReadMore:Un,onHoverReadMore:Vn,showNegativeSignalMenu:we,footerActionsMenu:Ie},u.createElement(u.Fragment,null,u.createElement(N.b,{isAuroraPostPageEnabled:!0,post:an?ze:null,inlinePost:X,ref:Oe,richTextStyle:yt?"SHORTFORM_CARD":"INLINE",postBodyInserts:yt?ht:null,markedUpBodyModel:Kn}),Re&&u.createElement(C.x,{paddingTop:"24px"},u.createElement(We,null))))))),pt&&!ye&&u.createElement(D.D,{onMouseEnter:Vn,onMouseLeave:function(){}},u.createElement(Ge,{onReadMore:Un,post:X,padding:xt?"24px 0 0 0":void 0})),ze&&Bn&&an&&u.createElement(f.cu,{post:ze,meteringInfo:Bn,excludePadding:!0}))),u.createElement(C.x,{marginTop:ye&&!an?void 0:"36px"}),X&&Nt&&u.createElement(v.T,{isDockingEnabled:Fe&&an,maxWidthSize:Ce},u.createElement(Le,{post:X,publisherContext:null===(Q=X.creator)||void 0===Q?void 0:Q.__typename,isActiveExpandedPost:an,showNegativeSignalMenu:we,actionsMenu:Ie})),ye&&an&&u.createElement(C.x,{paddingBottom:"32px"}))),ae&&u.createElement(O.P,{size:Ce},et))}))},68773:(e,n,t)=>{"use strict";t.d(n,{$:()=>m,G:()=>u});var i=t(28655),a=t.n(i),o=t(71439),r=t(67294),l=t(94124),d=t(77355),s=t(46696);function c(){var e=a()(["\n  fragment SidebarProfilePic_user on User {\n    id\n    imageId\n  }\n"]);return c=function(){return e},e}var m=function(e){var n=e.user;return n.imageId?r.createElement(d.x,{marginBottom:"20px",maxHeight:"131px",maxWidth:"131px",overflow:"hidden"},r.createElement(l.E,{src:(0,s.W6)({miroId:n.imageId,width:131,height:131,strategy:s._S.Crop}),width:131})):null},u=(0,o.Ps)(c())},63007:(e,n,t)=>{"use strict";t.d(n,{G:()=>r});var i=t(28655),a=t.n(i);function o(){var e=a()(["\n  fragment useShouldShowEntityDrivenSubscription_creator on User {\n    id\n  }\n"]);return o=function(){return e},e}var r=(0,t(71439).Ps)(o())},52602:(e,n,t)=>{"use strict";t.d(n,{_U:()=>I,Dk:()=>_});var i=t(28655),a=t.n(i),o=t(59713),r=t.n(o),l=t(63038),d=t.n(l),s=t(46829),c=t(71439),m=t(67294),u=t(57189),p=t(9273),v=t(6443),k=t(77355),g=t(9935),f=t(8126),S=t(18627),h=t(66411),y=t(14646),x=t(80872),N=t(87498);function b(){var e=a()(["\n  query ReadNextQuery($postId: ID!) {\n    post(id: $postId) {\n      id\n      readNext {\n        ... on ReadNextItem {\n          reason\n          post {\n            ... on Post {\n              ...ReadNextPostCard_post\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return b=function(){return e},e}function E(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function F(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?E(Object(t),!0).forEach((function(n){r()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):E(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var P={display:"none"},w={":last-of-type":{xs:P,sm:P,md:P,lg:P,xl:{display:"block"}}},I=function(e){var n=e.isVisible,t=void 0===n||n,i=e.postId,a=m.useState(!1),o=d()(a,2),r=o[0],l=o[1],c=(0,v.H)().value,p=(0,s.useLazyQuery)(C),N=d()(p,2),b=N[0],E=N[1],P=E.called,I=E.loading,O=E.error,D=E.data,A=(D=void 0===D?{post:void 0}:D).post,T=c&&_(c)&&!((0,x.yd)()||r),M=(0,S.Av)(),R=(0,y.I)(),L=(0,h.Lk)(),B=A&&A.readNext;return m.useEffect((function(){I||!O||B&&B.length||M.event("readNextError",{post:A,postId:i,error:O,readNextLength:B&&B.length||0})}),[I]),m.useEffect((function(){t&&B&&(M.event("readNext.viewed",{position:"sidebar"}),B.slice(0,4).map((function(e,n){var t=e.post,i=e.reason;return M.event("post.clientPresented",{source:(0,h.f0)(F(F({},L),{},{index:n,postFeedReason:i||void 0})),location:"post/".concat(t&&t.id)}),!0})))}),[t,B]),!P&&T&&b({variables:{postId:i||""}}),P&&!I&&!O&&A&&B&&B.length&&T?m.createElement(h.cW,{source:{name:"read_next",sectionType:h.bA.READ_NEXT_SIDEBAR},extendSource:!0},m.createElement(k.x,{width:"188px"},m.createElement(k.x,{md:{display:"none"},lg:{width:"780px",margin:"0 24px"},position:"relative",backgroundColor:"BACKGROUND",paddingBottom:"24px",paddingTop:"24px",width:"100%"},m.createElement(k.x,{position:"absolute",right:"0",top:"-4px"},m.createElement(g.P,{onClick:function(){(0,x.Ph)(),l(!0)},size:"SMALL",isPositionAbsolute:!1})),m.createElement(k.x,{width:"200px"},m.createElement(f.F1,{scale:"XS"},"Your journey starts here.")),m.createElement(k.x,{display:"flex",flexDirection:"column",justifyContent:"space-between"},A.readNext.slice(0,4).map((function(e,n){var t=e.post;return t?m.createElement("div",{className:R(w),key:n},m.createElement(u.N,{key:n,post:t})):null})))))):null};function _(e){return e&&e.createdAt+N.pU>Date.now()}var C=(0,c.Ps)(b(),p.Q)},9273:(e,n,t)=>{"use strict";t.d(n,{Q:()=>r});var i=t(319),a=t.n(i),o=t(4088),r={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ReadNextPostCard_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"mediumUrl"}},{kind:"Field",name:{kind:"Name",value:"previewContent"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"subtitle"}}]}},{kind:"Field",name:{kind:"Name",value:"primaryTopic"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"slug"}}]}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"previewImage"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"alt"}},{kind:"Field",name:{kind:"Name",value:"focusPercentX"}},{kind:"Field",name:{kind:"Name",value:"focusPercentY"}}]}},{kind:"Field",name:{kind:"Name",value:"clapCount"}},{kind:"FragmentSpread",name:{kind:"Name",value:"usePostUrl_post"}}]}}].concat(a()(o.u.definitions))}},57189:(e,n,t)=>{"use strict";t.d(n,{N:()=>p});var i=t(67294),a=t(25145),o=t(4381),r=t(27323),l=t(77355),d=t(87691),s=t(8431),c=t(14646),m=t(43487),u=t(46696),p=function(e){var n,t=e.post,p=e.shouldDisplayTopic,v=void 0===p||p,k=e.withFixedWidth,g=void 0===k||k,f=(0,m.v9)((function(e){return e.config.mediumOwnedAndOperatedCollectionIds})),S=t&&t.previewImage||{},h=S.focusPercentX,y=S.focusPercentY,x=S.id,N=S.alt,b=t.collection||{},E=b.name,F=b.id,P=t.primaryTopic&&t.primaryTopic.name,w=F&&(f.includes(F)?E:P)||"",I=t&&t.title||"",_=(null==t||null===(n=t.previewContent)||void 0===n?void 0:n.subtitle)||"",C=(0,a.L)(t),O=x?"170px":"".concat(228,"px"),D=(0,c.I)();return i.createElement(r.P,{href:C},i.createElement(l.x,{display:"flex",flexDirection:"column",justifyContent:"center",marginBottom:"20px"},v?i.createElement(l.x,{marginBottom:"4px"},i.createElement(s.Lh,{tag:"span"},i.createElement(d.F,{scale:"S",color:"DARKER"},i.createElement("div",{className:D({whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"})},w)))):null,i.createElement(l.x,{display:"flex",flexDirection:"row"},x&&i.createElement(o.UV,{miroId:x||"",alt:N||"",height:58,width:58,freezeGifs:!0,strategy:u._S.Crop,rules:{marginRight:"8px",marginTop:"4px"},focusPercentX:h||50,focusPercentY:y||50}),i.createElement(l.x,{display:"flex",flexDirection:"column"},I&&i.createElement(d.F,{scale:"S",color:"DARKER",clamp:3,tag:"div"},i.createElement("div",{className:g?D({width:O}):void 0},I)),_&&(null==I?void 0:I.length)<45&&i.createElement(d.F,{scale:"S",color:"LIGHTER",clamp:1,tag:"div"},i.createElement("div",{className:g?D({width:O}):void 0},_))))))}},97426:(e,n,t)=>{"use strict";t.d(n,{n:()=>c});var i=t(46829),a=t(77280),o=t(43487),r=t(319),l=t.n(r),d=t(42423),s={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PostViewerEdgeContentQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postMeteringOptions"}},type:{kind:"NamedType",name:{kind:"Name",value:"PostMeteringOptions"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"post"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"viewerEdge"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"fullContent"},arguments:[{kind:"Argument",name:{kind:"Name",value:"postMeteringOptions"},value:{kind:"Variable",name:{kind:"Name",value:"postMeteringOptions"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isLockedPreviewOnly"}},{kind:"Field",name:{kind:"Name",value:"validatedShareKey"}},{kind:"Field",name:{kind:"Name",value:"bodyModel"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"PostBody_bodyModel"}}]}}]}}]}}]}}]}}]}}].concat(l()(d.Pk.definitions))},c=function(){var e,n,t,r,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",d=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],c=(0,o.v9)((function(e){return e.navigation.referrer})),m=null!==(e=(0,a.G1)())&&void 0!==e?e:void 0,u=null!==(n=(0,a.PM)())&&void 0!==n?n:void 0,p={referrer:c,sk:m,source:u},v=(0,i.useQuery)(s,{variables:{postId:l,postMeteringOptions:p},ssr:!1,skip:!l||!d}),k=v.loading,g=v.error,f=v.data,S=null==f||null===(t=f.post)||void 0===t||null===(r=t.viewerEdge)||void 0===r?void 0:r.fullContent;return k?{loading:k}:g?{error:g}:{content:S}}},69937:(e,n,t)=>{"use strict";t.d(n,{l:()=>d});var i=t(28655),a=t.n(i),o=t(46829),r=t(71439);function l(){var e=a()(["\n  query TopicViewerEdge($topicId: ID!) {\n    topic(id: $topicId) {\n      ... on Topic {\n        id\n        viewerEdge {\n          id\n          isFollowing\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}var d=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=(0,o.useQuery)(s,{variables:{topicId:n},ssr:!1,skip:!n}),i=t.loading,a=t.error,r=t.data;return i?{loading:i}:a?{error:a}:{viewerEdge:null==r||null===(e=r.topic)||void 0===e?void 0:e.viewerEdge}},s=(0,r.Ps)(l())},867:(e,n,t)=>{"use strict";t.d(n,{o:()=>y});var i=t(63038),a=t.n(i),o=t(28655),r=t.n(o),l=t(71439),d=t(80439),s=t(67294),c=t(36405),m=t(25550),u=t(93717),p=t(18839),v=t(18627),k=t(66411),g=t(80872),f=t(43487);function S(){var e=r()(["\n  mutation SendAcctAuthEmailByUserId(\n    $userId: String!\n    $redirect: String\n    $fullName: String\n    $captchaValue: String\n  ) {\n    sendAcctAuthEmailByUserId(\n      userId: $userId\n      redirect: $redirect\n      fullName: $fullName\n      captchaValue: $captchaValue\n    ) {\n      ... on SusiMethod {\n        value\n      }\n      ... on BadRequest {\n        message\n      }\n      ... on FailedChallenge {\n        message\n      }\n      ... on NotFound {\n        message\n      }\n    }\n  }\n"]);return S=function(){return e},e}var h=(0,l.Ps)(S()),y=function(e){var n=e.actionUrl,t=e.children,i=e.onSuccess,o=e.token,r=e.userId,l=(0,v.Av)(),S=!!(0,c.P5)("skip_sign_in_recaptcha"),y=s.useState(!1),x=a()(y,2),N=x[0],b=x[1],E=(0,f.v9)((function(e){return e.navigation.currentLocation})),F=function(){b(!1)},P=(0,k.pK)(),w=(0,k.hp)(),I=n&&o?(0,p.hQ)(E,P,w,n,o):(0,p.hQ)(E,P,w),_=(0,m.r)(),C=_.loading,O=_.error,D=_.viewerId;return C||O?null:s.createElement(d.mm,{mutation:h,onCompleted:function(e){switch(e.sendAcctAuthEmailByUserId.__typename){case"SusiMethod":l.event("site.loginLinkSent",{}),i&&i();break;case"FailedChallenge":l.event("site.loginByEmailCaptchaFailure",{}),b(!1);break;case"BadRequest":case"NotFound":default:F()}},onError:F},(function(e){var n=function(n){(0,g.Zs)(!0,D,r,"Email",!1);var t="medium";l.event("susi.methodClicked",{entryPoint:w,operation:"login",susiMethod:t.toLowerCase(),alternateUserSuggestionShown:!0,alternateUserSuggestionAccountType:t.toLowerCase(),alternateUserSuggestionTargetUserId:r,alternateUserSuggestionSourceUserId:D}),e({variables:{userId:r,redirect:I,captchaValue:n}})};return s.createElement(s.Fragment,null,!S&&s.createElement(u.k,{callback:n,shouldExecuteRecaptcha:N}),t({handleSubmit:function(){return S?n(null):b(!0)}}))}))}},58670:(e,n,t)=>{"use strict";t.d(n,{r:()=>d});var i=t(67294),a=t(69862),o=t(73950),r=t(2959),l=t(40980),d=function(e){var n=e.actionUrl,t=e.token,d=e.userSocialLogins,s={actionUrl:n||"",operation:"login",token:t||"",targetUserId:d.userId,alternateUserSuggestion:!0};return i.createElement(l.$,{eventData:{operation:s.operation}},d.google?i.createElement(o.x,s):d.facebook?i.createElement(a.q,s):d.twitter?i.createElement(r.G,s):i.createElement(i.Fragment,null))}},84157:(e,n,t)=>{"use strict";t.d(n,{G:()=>p});var i=t(59713),a=t.n(i),o=t(67294),r=t(12291),l=t(6443),d=t(93310),s=t(66411),c=t(78285),m=t(43487);function u(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}var p=function(e){var n=e.declineSuggestedAccount,t=e.isSocial,i=(0,m.v9)((function(e){return e.navigation.hasRenderedAlternateUserBanner})),p=(0,s.hp)(),v=(0,r.I0)(),k=(0,l.H)(),g=k.loading,f=k.error,S=k.value;if(g||f)return o.createElement(o.Fragment,null);var h=function(e){return e?o.createElement(d.r,{onClick:function(){return y("SIGNIN_OPTIONS")},linkStyle:"OBVIOUS"},"See all login options"):o.createElement(o.Fragment,null,"Not you?"," ",o.createElement(d.r,{onClick:function(){return y("SIGNIN_OPTIONS")},linkStyle:"OBVIOUS"},"Sign in")," or ",o.createElement(d.r,{onClick:function(){return y("SIGNUP_OPTIONS")},linkStyle:"OBVIOUS"},"create an account"))},y=function(e){var t="SIGNIN_OPTIONS"===e?"login":"register";n(),v((0,c.Pc)(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?u(Object(t),!0).forEach((function(n){a()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):u(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({operation:t,step:e},!!p&&{susiEntry:p})))};return i?h(S):S?o.createElement(d.r,{onClick:function(){return n()}},"Not me"):h(t)}},54558:(e,n,t)=>{"use strict";t.d(n,{o:()=>x});var i=t(28655),a=t.n(i),o=t(59713),r=t.n(o),l=t(63038),d=t.n(l),s=t(71439),c=t(80439),m=t(67294),u=t(6443),p=t(25550),v=t(18627),k=t(66411),g=t(97171),f=t(77280);function S(){var e=a()(["\n  query UserSocialLoginsQuery($userId: String!) {\n    userSocialLogins(userId: $userId) {\n      userId\n      twitter\n      facebook\n      google\n      redactedEmailAddress\n      isMember\n      emailAddress\n      userAvatar {\n        __typename\n        username\n        name\n        imageId\n        mediumMemberAt\n      }\n    }\n  }\n"]);return S=function(){return e},e}function h(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function y(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?h(Object(t),!0).forEach((function(n){r()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):h(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var x=function(e){var n=e.children,t=e.postRenderCallback,i=(0,v.Av)(),a=(0,k.hp)(),o=(0,f.PM)(),r=(0,k.P7)(o||""),l=r.userId,s=r.name,S=m.useState({shouldRun:!1,showSuggestedAccount:!1,userSocialLogins:{facebook:!1,google:!1,twitter:!1,redactedEmailAddress:"",emailAddress:"",userAvatar:{__typename:"UserAvatar",username:"",name:"",imageId:"",mediumMemberAt:0},userId:"",isMember:!1}}),h=d()(S,2),x=h[0],b=h[1];m.useEffect((function(){var e=x.shouldRun,n=x.showSuggestedAccount,i=x.userSocialLogins;e&&t(E,n,i)}),[x.shouldRun]);var E=(0,u.H)().value,F=(0,p.r)(),P=F.loading,w=F.error,I=F.viewerId;if(P||w)return null;var _=!("email"!==s||E&&E.mediumMemberAt||!l);return _&&l?m.createElement(c.AE,{query:N,variables:{userId:l}},(function(e){var o=e.loading,r=e.error,l=e.data,d=(l=void 0===l?{}:l).userSocialLogins,s=!(o||r||!d||E&&!d.isMember||!d.facebook&&!d.google&&!d.twitter&&!d.redactedEmailAddress),c=y({loading:o,showSuggestedAccount:s},s&&{userSocialLogins:d,declineSuggestedAccount:function(){var e=(0,g.S)(d);i.event("susi.suggestNotYou",{entryPoint:a,susiMethod:e,alternateUserSuggestionAccountType:e,alternateUserSuggestionTargetUserId:null==d?void 0:d.userId,alternateUserSuggestionSourceUserId:I})}});return!t||o||x.shouldRun||b({shouldRun:!0,showSuggestedAccount:s,userSocialLogins:d}),n(c)})):(t&&!x.shouldRun&&b(y(y({},x),{},{shouldRun:!0})),n({showSuggestedAccount:_,loading:!1}))},N=(0,s.Ps)(S())},28451:(e,n,t)=>{"use strict";var i;t.d(n,{j:()=>i}),function(e){e.LOHighlightCTA="lo_highlight_cta",e.LIHighlightCTA="li_highlight_cta",e.RegWall="regwall",e.SyndicatedRegwall="syndicated_regwall"}(i||(i={}))},99849:(e,n,t)=>{"use strict";t.d(n,{t:()=>S,W:()=>h});var i=t(28655),a=t.n(i),o=t(63038),r=t.n(o),l=t(71439),d=t(67294),s=t(12291),c=t(45114),m=t(18627),u=t(66411),p=t(34135),v=t(78285),k=t(77280),g=t(84509);function f(){var e=a()(["\n  fragment PostReadTracker_post on Post {\n    id\n    collection {\n      slug\n    }\n    sequence {\n      sequenceId\n    }\n    content(postMeteringOptions: $postMeteringOptions) {\n      isLockedPreviewOnly\n    }\n  }\n"]);return f=function(){return e},e}function S(e,n,t,i){var a=(0,m.Av)(),o=(0,u.pK)(),l=(0,k.he)(),f=d.useState(!1),S=r()(f,2),h=S[0],y=S[1],x=(0,s.I0)();d.useEffect((function(){if(!h&&t){var r=function(){if(n.current&&!h){var r=(0,g.L6)(n.current),d=(0,g.tM)(r),s=d.top+d.height,m=(0,g.tM)((0,g.t_)()),u=m.top+m.height,p=t.content.isLockedPreviewOnly,k=i||o.includes("post_page");if(!p&&u>=s-100&&k){y(!0),x((0,v.C2)(!0));var f={source:i?"post_page":o,postId:t.id,collectionSlug:t.collection?t.collection.slug:"",sequenceId:t.sequence?t.sequence.sequenceId:""},S={referrer:l,referrerSource:o};i?a.event("post.clientRead",f,S):a.event("post.clientRead",f),e||(0,c.T8)(t.id)}}};return p.V6.on("scroll_end",r),function(){p.V6.off("scroll_end",r)}}}),[h,t,i]),d.useEffect((function(){return function(){x((0,v.C2)(!1))}}),[])}var h=(0,l.Ps)(f())},72619:(e,n,t)=>{"use strict";t.d(n,{d0:()=>O,_k:()=>D});var i=t(28655),a=t.n(i),o=t(71439),r=t(67294),l=t(43432),d=t(96277),s=t(27442),c=t(54878),m=t(17878),u=t(25735),p=t(6443),v=t(84531),k=t(77355),g=t(96370),f=t(47230),S=t(93310),h=t(21755),y=t(8126),x=t(87691),N=t(18627),b=t(66411),E=t(43487),F=t(87498),P=t(17583),w=t(78870),I=t(50458),_=t(68216);function C(){var e=a()(["\n  fragment EntityDrivenSubscriptionLandingPageScreen_writer on User {\n    name\n    imageId\n    id\n    username\n    isPartnerProgramEnrolled\n    referredMembershipCustomHeadline\n    referredMembershipCustomBody\n    customStyleSheet {\n      ...CustomThemeProvider_customStyleSheet\n      ...CustomBackgroundWrapper_customStyleSheet\n      ...MetaHeader_customStyleSheet\n    }\n    ...MetaHeader_publisher\n    ...userUrl_user\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return C=function(){return e},e}var O=function(e){var n,t,i=e.user,a=e.redirectExperiment,o=e.postId,_=(0,E.v9)((function(e){return e.config.authDomain})),C=(0,b.pK)(),O=(0,p.H)().value,D=(0,N.Av)(),A=(0,E.v9)((function(e){return e.config.productName})),T=O&&O.id===i.id,M=(0,P.s)()||h.j.lg,R=!!(0,u.VB)({name:"enable_referred_memberships_custom_messaging",placeholder:!1}),L=M===h.j.xs||M===h.j.sm;r.useEffect((function(){D.event("entityDrivenSubscriptionPage.viewed",{creatorId:null==i?void 0:i.id,source:C})}),[]);var B=r.useCallback((function(){D.event("entityDrivenSubCallToAction.clicked",{userId:null==O?void 0:O.id,entityId:null==i?void 0:i.id})}),[i,null==O?void 0:O.id,_]);if(!i)return null;var j=null!==(n=i.name)&&void 0!==n?n:"",U=null!==(t=i.imageId)&&void 0!==t?t:F.gG,V=i.id,W=(0,I.AWr)(i,_),H=(0,w.Rk)((0,I.c5p)(_),{subscribeToUserId:V,susiEntry:"entity_driven_subscription_lp"}),z=o?(0,I.o2w)(_,o):W,G=null!=O&&O.mediumMemberAt?W:H,Y="Read every story from ".concat(j," (and thousands of other writers on ").concat(A,")."),q="Your membership fee directly supports ".concat(j," and other writers you read. You'll also get full access to every story on ").concat(A,"."),K=R&&i.referredMembershipCustomHeadline?i.referredMembershipCustomHeadline:Y,$=R&&i.referredMembershipCustomBody?i.referredMembershipCustomBody:q;return r.createElement(r.Fragment,null,r.createElement(b.cW,{source:{name:"entity_driven_subscription",userId:V}},r.createElement(c.G8,{customStyleSheet:i.customStyleSheet},r.createElement(s.f,{customStyleSheet:i.customStyleSheet},r.createElement(k.x,{display:"flex",height:"100vh",flexDirection:"column"},r.createElement(k.x,null,L?r.createElement(l.kw,{isLogoCentered:!1,marginBottomSm:0}):r.createElement(d.Go,{forceSmall:!0,publisher:i,customStyleSheet:i.customStyleSheet})),r.createElement(k.x,{display:"flex",height:"0",flexGrow:"1",textAlign:"center",justifyContent:"center",alignItems:"center",flexDirection:"column"},r.createElement(g.P,{size:"inset"},r.createElement(k.x,{display:"flex",paddingBottom:"32px",justifyContent:"center"},r.createElement(m.s,null,r.createElement(v.z,{miroId:U,alt:j||"",diameter:128,freezeGifs:!1})),r.createElement(m.e,null,r.createElement(v.z,{miroId:U,alt:j||"",diameter:80,freezeGifs:!1}))),r.createElement(k.x,{paddingBottom:"20px"},r.createElement(y.F1,{scale:{xs:"S",sm:"S",md:"L",lg:"L",xl:"L"}},K)),r.createElement(k.x,{paddingBottom:"20px"},r.createElement(x.F,{scale:"L",color:"DARKER"},$)),r.createElement(k.x,{display:"flex",paddingBottom:"20px",flexDirection:{xs:a?"column-reverse":void 0,sm:a?"column-reverse":void 0,md:void 0,lg:void 0,xl:void 0},justifyContent:"center"},a&&r.createElement(k.x,{paddingRight:{xs:void 0,sm:void 0,md:"12px",lg:"12px",xl:"12px"},paddingTop:{xs:"12px",sm:"12px",md:void 0,lg:void 0,xl:void 0}},r.createElement(f.z,{href:z,buttonStyle:"OBVIOUS",size:"LARGE"},"Not now")),r.createElement(k.x,null,r.createElement(f.z,{onClick:B,href:G,buttonStyle:"STRONG",size:"LARGE"},"Become a member"))),!a&&!T&&r.createElement(x.F,{scale:"L",color:"DARKER",tag:"span"},r.createElement(S.r,{linkStyle:"SUBTLE",href:W},"Visit ",j,"'s profile")),R&&T&&r.createElement(x.F,{scale:"L",color:"ACCENT",tag:"span"},r.createElement(S.r,{linkStyle:"SUBTLE",href:(0,I.mEF)(_)},"Edit this message")))))))))},D=(0,o.Ps)(C(),_.$m,c.Kc,s.w,d.Mv,d.aU)},97171:(e,n,t)=>{"use strict";function i(e){if((e.match(/ /g)||[]).length>1)return"";var n=e.indexOf(" ");return e.substring(0,n)}function a(e){return e.google?"google":e.facebook?"facebook":e.twitter?"twitter":"medium"}t.d(n,{J:()=>i,S:()=>a})},22680:(e,n,t)=>{"use strict";t.d(n,{j7:()=>m,OO:()=>u,iI:()=>p});var i=t(28655),a=t.n(i),o=t(71439),r=t(97217),l=t(15085),d=t(42498);function s(){var e=a()(["\n  fragment shortformPostMetaDescription_post on Post {\n    id\n    metaDescription\n    seoDescription\n    shortformType\n    title\n    ...getPostContentAsString_post\n  }\n  ","\n"]);return s=function(){return e},e}function c(){var e=a()(["\n  fragment postMetaDescription_post on Post {\n    id\n    title\n    seoDescription\n    metaDescription\n    creator {\n      id\n      name\n    }\n    collection {\n      id\n      name\n    }\n    previewContent {\n      subtitle\n    }\n    ...getPostContentAsString_post\n  }\n  ","\n"]);return c=function(){return e},e}var m=function(e){return function(e){var n=e.metaDescription,t=e.seoDescription,i=e.title||"";if(t)return t;if(n)return n;var a=function(e){var n=(0,l.r4)(e,250);return n&&(0,d.N8)(n,200)}(e);if(a.length>150)return a;var o=e.previewContent&&e.previewContent.subtitle||"";if(o.length>140)return o;o.length>0&&(o+=".");var r=(i.length?i+". ":"")+o;if(r.length>140)return r;var s="“".concat(i,"” is published");return e.creator&&e.creator.name&&(s+=" by ".concat(e.creator.name)),e.collection&&e.collection.name&&(s+=" in ".concat(e.collection.name)),"".concat(o," ").concat(s,".")}(e).trim()},u=function(e,n){var t=e.metaDescription,i=e.seoDescription,a=e.shortformType,o=a===r.po.SHORTFORM_TYPE_NOTE||!a;if(i)return i;if(t)return t;if(o&&n){var s=(0,l.r4)(e,350,0);return(0,d.N8)(s,300)}return""},p=(0,o.Ps)(c(),l.bh);(0,o.Ps)(s(),l.bh)},32934:(e,n,t)=>{"use strict";t.d(n,{bh:()=>o,dm:()=>s,bq:()=>c,Pz:()=>m,HF:()=>u});var i=t(319),a=t.n(i),o={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"getPostContentAsString_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[{kind:"Argument",name:{kind:"Name",value:"postMeteringOptions"},value:{kind:"Variable",name:{kind:"Name",value:"postMeteringOptions"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"bodyModel"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"paragraphs"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"text"}},{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"mixtapeMetadata"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"href"}}]}}]}}]}}]}}]}}]},r=[{kind:"FragmentDefinition",name:{kind:"Name",value:"appendPostContext_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"sequence"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"}}]}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}}]}}],l=[{kind:"FragmentDefinition",name:{kind:"Name",value:"maybeAppendProductName_collection"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"domain"}}]}}],d={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"postTitle_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"seoTitle"}},{kind:"Field",name:{kind:"Name",value:"firstPublishedAt"}},{kind:"FragmentSpread",name:{kind:"Name",value:"getPostContentAsString_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"appendPostContext_post"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"domain"}},{kind:"FragmentSpread",name:{kind:"Name",value:"maybeAppendProductName_collection"}}]}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"previewContent"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"subtitle"}}]}}]}}].concat(a()(o.definitions),a()(r),a()(l))},s={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"getTitleDetails_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[{kind:"Argument",name:{kind:"Name",value:"postMeteringOptions"},value:{kind:"Variable",name:{kind:"Name",value:"postMeteringOptions"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"bodyModel"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"GetTitleIndexMap_bodyModel"}}]}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"getPostContentAsString_post"}}]}}].concat(a()([{kind:"FragmentDefinition",name:{kind:"Name",value:"GetTitleIndexMap_bodyModel"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"RichText"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"paragraphs"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"text"}}]}}]}}]),a()(o.definitions))},c={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"getTitleForPost_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"FragmentSpread",name:{kind:"Name",value:"postTitle_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"getTitleDetails_post"}}]}}].concat(a()(d.definitions),a()(s.definitions))},m={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"shortformPostTitle_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"seoTitle"}},{kind:"FragmentSpread",name:{kind:"Name",value:"getPostContentAsString_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"appendPostContext_post"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"maybeAppendProductName_collection"}}]}}]}}].concat(a()(o.definitions),a()(r),a()(l))},u={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"shouldIndexPost_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"firstPublishedAt"}},{kind:"Field",name:{kind:"Name",value:"isLimitedState"}},{kind:"Field",name:{kind:"Name",value:"isShortform"}},{kind:"Field",name:{kind:"Name",value:"shortformType"}},{kind:"Field",name:{kind:"Name",value:"visibility"}},{kind:"Field",name:{kind:"Name",value:"curationStatus"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"atsQualifiedAt"}},{kind:"Field",name:{kind:"Name",value:"customDomainState"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"live"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"status"}},{kind:"Field",name:{kind:"Name",value:"isSubdomain"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"customDomainState"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"live"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"status"}},{kind:"Field",name:{kind:"Name",value:"isSubdomain"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"atsQualifiedAt"}}]}},{kind:"Field",name:{kind:"Name",value:"ptsQualifiedAt"}}]}},{kind:"Field",name:{kind:"Name",value:"noIndex"}},{kind:"Field",name:{kind:"Name",value:"isIndexable"}},{kind:"FragmentSpread",name:{kind:"Name",value:"getPostContentAsString_post"}}]}}].concat(a()(o.definitions))}},15085:(e,n,t)=>{"use strict";t.d(n,{r4:()=>w,bh:()=>I,yB:()=>_,lO:()=>A,Bg:()=>T,_t:()=>M,bq:()=>R,oS:()=>L,c_:()=>B});var i=t(59713),a=t.n(i),o=t(28655),r=t.n(o),l=t(71439),d=t(93022),s=t(61796),c=t(97217),m=t(44987),u=t(42498);function p(){var e=r()(["\n  fragment shouldIndexPost_post on Post {\n    id\n    firstPublishedAt\n    isLimitedState\n    isShortform\n    shortformType\n    visibility\n    curationStatus\n    creator {\n      name\n      atsQualifiedAt\n      customDomainState {\n        live {\n          status\n          isSubdomain\n        }\n      }\n    }\n    collection {\n      customDomainState {\n        live {\n          status\n          isSubdomain\n        }\n      }\n      creator {\n        atsQualifiedAt\n      }\n      ptsQualifiedAt\n    }\n    noIndex\n    isIndexable\n    ...getPostContentAsString_post\n  }\n  ","\n"]);return p=function(){return e},e}function v(){var e=r()(["\n  fragment shortformPostTitle_post on Post {\n    id\n    title\n    seoTitle\n    ...getPostContentAsString_post\n    ...appendPostContext_post\n    collection {\n      ...maybeAppendProductName_collection\n    }\n  }\n  ","\n  ","\n  ","\n"]);return v=function(){return e},e}function k(){var e=r()(["\n  fragment getTitleForPost_post on Post {\n    id\n    title\n    ...postTitle_post\n    ...getTitleDetails_post\n  }\n  ","\n  ","\n"]);return k=function(){return e},e}function g(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function f(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?g(Object(t),!0).forEach((function(n){a()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):g(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function S(){var e=r()(["\n  fragment postTitle_post on Post {\n    id\n    title\n    seoTitle\n    firstPublishedAt\n    ...getPostContentAsString_post\n    ...appendPostContext_post\n    collection {\n      id\n      name\n      domain\n      ...maybeAppendProductName_collection\n    }\n    creator {\n      name\n    }\n    previewContent {\n      subtitle\n    }\n  }\n  ","\n  ","\n  ","\n"]);return S=function(){return e},e}function h(){var e=r()(["\n  fragment maybeAppendProductName_collection on Collection {\n    id\n    domain\n  }\n"]);return h=function(){return e},e}function y(){var e=r()(["\n  fragment getTitleDetails_post on Post {\n    id\n    content(postMeteringOptions: $postMeteringOptions) {\n      bodyModel {\n        ...GetTitleIndexMap_bodyModel\n      }\n    }\n    ...getPostContentAsString_post\n  }\n  ","\n  ","\n"]);return y=function(){return e},e}function x(){var e=r()(["\n  fragment getPostContentAsString_post on Post {\n    content(postMeteringOptions: $postMeteringOptions) {\n      bodyModel {\n        paragraphs {\n          text\n          type\n          mixtapeMetadata {\n            href\n          }\n        }\n      }\n    }\n  }\n"]);return x=function(){return e},e}function N(e,n){var t;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=function(e,n){if(e){if("string"==typeof e)return b(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?b(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r=!0,l=!1;return{s:function(){t=e[Symbol.iterator]()},n:function(){var e=t.next();return r=e.done,e},e:function(e){l=!0,o=e},f:function(){try{r||null==t.return||t.return()}finally{if(l)throw o}}}}function b(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,i=new Array(n);t<n;t++)i[t]=e[t];return i}function E(){var e=r()(["\n  fragment appendPostContext_post on Post {\n    id\n    sequence {\n      title\n    }\n    collection {\n      name\n    }\n    creator {\n      name\n    }\n  }\n"]);return E=function(){return e},e}function F(e,n){var t,i,a;return null!==(t=n.sequence)&&void 0!==t&&t.title?e+=" - ".concat(n.sequence.title):null!==(i=n.collection)&&void 0!==i&&i.name?e+=" - ".concat(n.collection.name):null!==(a=n.creator)&&void 0!==a&&a.name&&(e+=" - ".concat(n.creator.name)),e}var P=(0,l.Ps)(E());function w(e){var n,t,i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{includeMixtapeHref:!1},l=r.includeMixtapeHref,d=(null===(n=e.content)||void 0===n||null===(t=n.bodyModel)||void 0===t?void 0:t.paragraphs)||[],s="",c=N(d);try{for(c.s();!(i=c.n()).done;){var m=i.value,u=m.mixtapeMetadata,p=m.text,v=m.type;if(l&&null!=u&&u.href?s+=s?" ".concat(u.href):u.href:"P"===v&&p&&p.length>o&&(s+=s?" ".concat(p):p),s.length>a)break}}catch(e){c.e(e)}finally{c.f()}return s}var I=(0,l.Ps)(x());function _(e){var n=!1,t="";if(e.content&&e.content.bodyModel&&e.content.bodyModel.paragraphs){var i=e.content.bodyModel.paragraphs,a=(0,s.LI)(i).titleIndex;"number"==typeof a&&(t=i[a].text||"",n=!0)}return{hasTitleGraf:n,latestTitle:t}}var C=(0,l.Ps)(y(),I,s.k);function O(e,n,t){return null!=t&&t.domain?e:"".concat(e," - ").concat(n)}var D=(0,l.Ps)(h());function A(e,n){var t,i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=e.seoTitle,r=e.title||"",l=(null===(t=e.previewContent)||void 0===t?void 0:t.subtitle)||"";if(o)return(0,m.p)(o,e.collection&&e.collection.name,n);if(!a)return r.length>50?r:r=O(r=F(r,e),n,e.collection);r.length<33&&l&&(l=(0,u.N8)(l,40),r+=". ".concat(l)),null!==(i=e.creator)&&void 0!==i&&i.name&&(r+=" | by ".concat(e.creator.name));var s="",c=Date.now()-5184e6;e.firstPublishedAt>=c&&(s=" | ".concat((0,d.Z)(e.firstPublishedAt,"LLL, yyyy")));var p=e.collection;return p?p.domain?r+="".concat(s," | ").concat(p.name):r+=" | ".concat(p.name).concat(s," | ").concat(n):r+="".concat(s," | ").concat(n),r}var T=(0,l.Ps)(S(),I,P,D);function M(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_(e),i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e.title||"",o=t.latestTitle||a,r=f(f({},e),{},{title:o});return A(r,n,i).trim()}var R=(0,l.Ps)(k(),T,C);function L(e,n,t){var i=e.seoTitle,a=e.title||"";return i?(0,m.p)(i,e.collection&&e.collection.name,n):a=O(a=F(a=function(e,n,t){var i=n.shortformType,a=i===c.po.SHORTFORM_TYPE_NOTE||!i;return t||(a?e=w(n,250,0):i===c.po.SHORTFORM_TYPE_LINK&&(e=w(n,250,0,{includeMixtapeHref:!0}))),(0,u.N8)(e,200)}(a,e,t),e),n,e.collection)}function B(e){var n,t,i,a,o=e.noIndex,r=e.collection,l=e.curationStatus,d=e.firstPublishedAt,s=e.isLimitedState,m=e.isShortform,u=e.shortformType,p=e.visibility,v=e.isIndexable,k=u===c.po.SHORTFORM_TYPE_NOTE||!u;if(o)return{shouldIndexPost:!1,indexReason:"noIndex is set"};if(!d)return{shouldIndexPost:!1,indexReason:"draft"};if("PUBLIC"!==p&&"LOCKED"!==p)return{shouldIndexPost:!1,indexReason:"unlisted (PUBLIC | LOCKED)"};if(s)return{shouldIndexPost:!1,indexReason:"limited state"};if(m)if(k){if(w(e,10,0).length<=10)return{shouldIndexPost:!1,indexReason:"insufficient content <=10 chars"}}else if(0===w(e,10,0).length)return{shouldIndexPost:!1,indexReason:"shortform with no commentary"};if(v&&d<16347744e5)return{shouldIndexPost:!0,indexReason:"english, has spam score < 0.5 & published before 10/21/2021"};if((null===(n=e.creator)||void 0===n?void 0:n.atsQualifiedAt)>0||r&&r.ptsQualifiedAt>0)return{shouldIndexPost:!0,indexReason:"author or pub is high-quality"};if(l&&(l===c.Xg.CURATION_STATUS_DISTRIBUTED||l===c.Xg.CURATION_STATUS_DISTRIBUTED_AND_DISABLED))return{shouldIndexPost:!0,indexReason:"curated post"};var g=["DELETED","FAILED","UNSPECIFIED"],f=null==r||null===(t=r.customDomainState)||void 0===t?void 0:t.live,S=null===(i=e.creator)||void 0===i||null===(a=i.customDomainState)||void 0===a?void 0:a.live;return f&&!f.isSubdomain&&!g.includes(f.status)||S&&!S.isSubdomain&&!g.includes(S.status)?{shouldIndexPost:!0,indexReason:"custom domain user or pub"}:{shouldIndexPost:!1,indexReason:"no matching rule"}}(0,l.Ps)(v(),I,P,D),(0,l.Ps)(p(),I)},44987:(e,n,t)=>{"use strict";t.d(n,{N:()=>i,p:()=>a});var i=function(e){return e||"Untitled story"},a=function(e,n,t){return n?"".concat(e," | ").concat(n):t?"".concat(e," | ").concat(t):e}}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/58236.40ad7298.chunk.js.map